(globalThis.webpackChunk_wigwam_app=globalThis.webpackChunk_wigwam_app||[]).push([[999],{1011:(e,a,s)=>{"use strict";var t=s(85893),r=s(18985),n=s(85350),l=s(27211),o=s(67294),i=s(90512),c=s(98964),d=s(48583),m=s(5042),u=s(52889),x=s(84708),p=s(9755),h=s(98456),g=s(84690),f=s(45642),w=s(52862),v=s(13240),b=s(69165),y=s(5483),j=s(15598),N=s(61134),k=s(69652),C=s(78828),T=s(17611),P=s(53658),Z=s(42779),S=s(18988),A=s(86826),F=s(87618),E=s(49088);const L=({className:e,currentItemClassName:a,currentListItemClassName:s,currentItemIconClassName:r,contentClassName:n,withAction:l,onChange:c,changeInternalChainId:x=!0,size:p="large",source:h,withFiat:g})=>{const f=(0,u.xx)(),v=(0,u.Pf)(),{currentAccount:b}=(0,u.xe)(),y=(0,w.kq)((0,m.F2)(b.address),"off"),j=(0,o.useMemo)((()=>y&&new Map(y.map((e=>[e.chainId,e.portfolioUSD])))),[y]),N=(0,o.useMemo)((()=>j?.size?(v??[]).map((e=>({...e,balanceUSD:j?.get(e.chainId)}))).sort(F.To):v??[]),[v,j]),k=N.find((e=>e.chainId===f))??N[0],C=(0,d.b9)(m.G_),T=(0,o.useCallback)((e=>{x&&C(e),c?.(e)}),[x,C,c]);return(0,t.jsx)(E.Z,{networks:N,currentNetwork:k,onNetworkChange:T,className:e,withAction:l,size:p,source:h,withFiat:g,currentItemClassName:(0,i.Z)("small"===p?"h-[1.75rem]":"h-12",a),currentListItemClassName:(0,i.Z)("!bg-brand-main/20 border-2 border-[#80EF6E]","small"===p?"!py-1.5":"!py-2",s),currentItemIconClassName:r,contentClassName:n})};var U=s(59225),I=s(83286),M=s(25715);const G=(0,i.Z)("w-[4.65rem] h-[4.75rem] min-w-[4.75rem]","border border-brand-main/60"),Y=({firstLogoUrl:e=M,dappLogoUrl:a})=>(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(I.Z,{className:(0,i.Z)(G,"z-10"),src:e}),(0,t.jsx)(I.Z,{className:(0,i.Z)(G,"-ml-7"),src:a,imageClassName:"min-h-[calc(100%+1px)] min-w-[calc(100%+1px)]"})]});var D;function R(){return R=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},R.apply(this,arguments)}var B;function O(){return O=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},O.apply(this,arguments)}var V;function z(){return z=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},z.apply(this,arguments)}var q=s(4182),_=s(28822);const W=({className:e,children:a,approveText:s="Approve",declineText:r="Decline",disabled:n,approving:l,onApprove:o})=>{const{total:c}=(0,d.Dv)(m.nq);return(0,t.jsx)(u.$J,{children:d=>(0,t.jsxs)("div",{ref:d,className:(0,i.Z)("w-[calc(100%-2px)] max-w-[438px]",c>1?"h-[calc(100%+2px)] max-h-[662px]":"h-[calc(100%+2px+0.75rem)] max-h-[calc(662px+0.75rem)] -mt-3","min-h-[400px]","rounded-xl border border-brand-main/[.07] shadow-approvestack","brandbg-popup","flex flex-col","pt-8 pb-5 px-6",e),children:[a,(0,t.jsx)("div",{className:"flex-1 shrink-0"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 w-full mt-5",children:[(0,t.jsx)(U.Z,{theme:"secondary",className:"w-full",onClick:()=>{o?.(!1)},children:r}),(0,t.jsx)(U.Z,{className:"w-full",disabled:n,loading:l,onClick:()=>{o?.(!0)},children:s})]})]})})},$=({approval:e})=>{const a=(0,o.useMemo)((()=>((0,f.h)("page"===e.source.type),new URL(e.source.url).origin)),[e]),[s,n]=(0,w.Df)([m.G_,(0,m.t6)(a),m.P8,m.U6]),{currentAccount:l,allAccounts:i}=(0,u.xe)(),c=(0,o.useMemo)((()=>[...n?.accountAddresses??[],l.address]),[n,l]),{alert:d}=(0,b.Rh)(),x=(0,o.useRef)(new Set(c)),p=(0,h.Z)(),v=(0,o.useRef)(n?.chainId??s),N=v.current,k=(0,o.useCallback)((e=>{v.current=e,p()}),[p]);(0,u.CO)(N,l.address),(0,o.useEffect)((()=>{n||s===v.current||k(s)}),[n,s,k]),(0,o.useEffect)((()=>{x.current.add(l.address),p()}),[l,p]);const S=(0,o.useCallback)((e=>{const a=x.current;a.has(e)?a.delete(e):a.add(e),F(a.size===i.length),p()}),[i.length,p]),[A,F]=(0,o.useState)(!1),E=(0,o.useCallback)(((e=!1)=>{const a=x.current;i.forEach((({address:s})=>{e?a.has(s)&&a.delete(s):a.has(s)||a.add(s)})),F((e=>!e)),p()}),[i,p]),[U,I]=(0,o.useState)(!1),M=(0,o.useCallback)((async a=>{I(!0);try{await(0,y.u)((async()=>{const s=Array.from(x.current);if(a&&0===s.length)throw new Error("You must select at least one account");const t=a?s:void 0;await(0,r.ww)(e.id,{approved:a,accountAddresses:t,overriddenChainId:v.current})}))}catch(e){d({title:"Error",content:e?.message??"Unknown error occurred"}),I(!1)}}),[e,I,d]);return(0,o.useEffect)((()=>{(0,r.L9)(r.fU.DappConnect)}),[]),"page"!==e.source.type?null:(0,t.jsx)(W,{approveText:"Connect",declineText:"Deny",className:"items-center",approving:U,onApprove:M,children:(0,t.jsxs)(u.nw,{chainId:N,children:[(0,t.jsx)(Y,{dappLogoUrl:e.source.favIconUrl}),(0,t.jsx)("h1",{className:"text-2xl font-bold mt-4 mb-1",children:"Connect to the website"}),(0,t.jsx)("span",{className:"text-base text-center mb-6",children:new URL(e.source.url).host}),(0,t.jsxs)("div",{className:"w-full flex items-center px-3 pb-1.5",children:[(0,t.jsxs)(g.fC,{checked:A,onCheckedChange:e=>E(!e),className:"flex items-center",children:[(0,t.jsx)(j.Z,{checked:A,className:"mr-2.5"}),(0,t.jsx)("span",{className:"text-brand-inactivedark2",children:"Select all"})]}),(0,t.jsx)(Z.Z,{content:(0,t.jsx)("p",{children:"Use this switch to select a preferred network for the connection and to preview the balances of the wallets to select the right one."}),interactive:!1,placement:"bottom-end",size:"large",className:"ml-auto",children:(0,t.jsx)(P.Z,{})}),(0,t.jsx)(L,{className:"ml-2",onChange:k,changeInternalChainId:!1,withAction:!1,size:"small",source:"connection",withFiat:!1})]}),(0,t.jsx)(T.Z,{}),0===i.length?(0,t.jsx)(Q,{}):(0,t.jsx)(C.Z,{className:"w-full h-full box-content -mr-5 pr-5 grow",viewPortClassName:"py-2.5 viewportBlock",children:i.map(((e,a)=>(0,t.jsx)(K,{account:e,checked:x.current.has(e.address),onToggleAdd:()=>S(e.address),className:a!==i.length-1?"mb-1":""},e.address)))}),(0,t.jsx)(J,{})]})})},H=[{Icon:function(e){return o.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),D||(D=o.createElement("path",{fill:"#4F9A5E",d:"M12 4a1 1 0 0 1 1 1v14a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1m5 4a1 1 0 0 1 1 1v10a1 1 0 1 1-2 0V9a1 1 0 0 1 1-1M7 12a1 1 0 0 1 1 1v6a1 1 0 1 1-2 0v-6a1 1 0 0 1 1-1"})))},label:"See wallet balance and activity"},{Icon:function(e){return o.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),B||(B=o.createElement("path",{fill:"#4F9A5E",d:"M20.664 5.253a1 1 0 0 1 .083 1.411l-10.666 12a1 1 0 0 1-1.495 0l-5.333-6a1 1 0 0 1 1.494-1.328l4.586 5.159 9.92-11.16a1 1 0 0 1 1.411-.082"})))},label:"Send requests for transactions"},{Icon:function(e){return o.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),V||(V=o.createElement("path",{fill:"#B82D41",d:"M5.293 5.293a1 1 0 0 1 1.414 0L12 10.586l5.293-5.293a1 1 0 1 1 1.414 1.414L13.414 12l5.293 5.293a1 1 0 0 1-1.414 1.414L12 13.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L10.586 12 5.293 6.707a1 1 0 0 1 0-1.414"})))},label:"CANNOT move funds without permission"}],J=()=>(0,t.jsx)("div",{className:"grid grid-cols-3 gap-3 py-3 border-y border-brand-main/[.07] mt-auto",children:H.map((({label:e,Icon:a})=>(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)(a,{}),(0,t.jsx)("h4",{className:"text-xs text-brand-inactivedark mt-2",children:e})]},e)))}),Q=()=>(0,t.jsxs)("div",{className:(0,i.Z)("flex flex-col items-center justify-center mx-auto","w-full h-full py-4","text-sm text-brand-inactivedark2 text-center"),children:[(0,t.jsx)(q.r,{className:"mb-4"}),(0,t.jsx)("div",{children:"There no wallets to connect."}),(0,t.jsxs)(U.Z,{theme:"secondary",onClick:()=>(0,v.E)({addAccOpened:!0},["token"],!0),className:"ml-5 !py-1 !text-sm !min-w-[8rem] mt-2.5",children:[(0,t.jsx)(_.r,{className:"h-5 w-auto mr-1.5"}),"Add wallet"]})]}),K=({account:e,checked:a,onToggleAdd:s,className:r})=>{const{address:n}=e;return(0,t.jsxs)(g.fC,{checked:a,onCheckedChange:s,autoFocus:a,className:(0,i.Z)("w-full","flex items-center","min-w-0 px-3 py-1.5","rounded-[.625rem]","transition-colors","hover:bg-brand-main/10 focus-visible:bg-brand-main/10","outline-none",r),children:[(0,t.jsx)(j.Z,{checked:a,className:"mr-4 min-w-[1.25rem]"}),(0,t.jsx)(N.Z,{seed:n,source:"dicebear",type:"personas",className:(0,i.Z)("h-8 w-8 min-w-[2rem]","mr-3","bg-black/20","rounded-[.625rem]")}),(0,t.jsxs)("span",{className:"flex flex-col text-left min-w-0 max-w-[40%] mr-auto",children:[(0,t.jsx)(A.Z,{wallet:e,theme:"small"}),(0,t.jsx)(k.ZP,{hash:n,className:"text-xs text-brand-inactivedark font-normal mt-[2px]",withTooltip:!1})]}),(0,t.jsx)("span",{className:"flex flex-col text-right min-w-0",children:(0,t.jsx)(S.Z,{address:n,className:"text-sm font-bold text-brand-light ml-2"})})]})};var X=s(40565),ee=s(27929),ae=s(72047),se=s.n(ae),te=s(80717),re=s(9111),ne=s(13411),le=s(96934),oe=s(12986),ie=s(69380),ce=s(70794);const de={low:{icon:"\u{1f40c}",name:"Eco"},average:{icon:"\u{1f951}",name:"Market"},high:{icon:"\u{1f4a8}",name:"ASAP"}},me={icon:"\u2699\ufe0f",name:"Custom"};function ue(e,a=0){return e||0===e?ie.bM(e,a):""}function xe(e,a=0){try{return ie.vz(e,a)}catch{return null}}const pe=({value:e,decimals:a=9,operator:s="plus"})=>{const t=new ce.Z(e),r=new ce.Z(1).multipliedBy(new ce.Z(10).pow(a)),n=t[s](r);return n.gt(0)?BigInt(n.toString()):0n};var he=s(37973),ge=s(93194),fe=s(80168),we=s(27367),ve=s(67643),be=s(67278),ye=s(70300),je=s(63282);const Ne=({account:e,source:a,signing:s,className:r})=>(0,t.jsxs)("div",{className:(0,i.Z)("flex",r),children:[(0,t.jsx)(Te,{account:e,signing:s}),(0,t.jsxs)("div",{className:"flex flex-col pl-2 w-1/2",children:[(0,t.jsx)(Ce,{source:a,className:"h-1/2 mb-1"}),s?(0,t.jsx)(Ze,{className:"h-1/2"}):(0,t.jsx)(Pe,{className:"h-1/2"})]})]}),ke=(0,i.Z)("flex items-center","w-full","py-1 px-3","text-xs font-bold","bg-brand-main/5","rounded-[.625rem]"),Ce=({source:e,className:a})=>{const s=(0,o.useCallback)((()=>{"page"===e.type&&(0,y.pC)(e.url,e.tabId)}),[e]);return"self"===e.type?(0,t.jsxs)("div",{className:(0,i.Z)(ke,a),children:[(0,t.jsx)("span",{className:"w-6 h-6 min-w-[1.5rem] flex items-center justify-center mr-2",children:(0,t.jsx)(he.A,{Icon:e.swapMeta?be.r:e.kind===n._g.Reward?fe.r:ge.r,className:"!w-5 !h-5 styled-icon--active"})}),e.swapMeta?"Swap":e.kind===n._g.Reward?"Rewards":"Transfer"]}):(0,t.jsxs)("button",{onClick:s,className:(0,i.Z)(ke,"cursor-pointer","transition-colors","hover:bg-brand-main/10 focus-visible:bg-brand-main/10",a),children:[(0,t.jsx)(I.Z,{src:e.favIconUrl,alt:e.url,className:(0,i.Z)("w-6 min-w-[1.5rem] h-6 mr-2 object-cover","!border-none"),fallbackClassName:"!h-3/5"}),(0,t.jsx)("span",{className:"min-w-0 truncate",children:new URL(e.url).host}),(0,t.jsx)(we.r,{className:"ml-1 w-4 h-4 min-w-[1rem]"})]})},Te=({account:e,signing:a})=>(0,t.jsxs)("div",{className:(0,i.Z)("relative","p-3","w-1/2","bg-brand-main/5","rounded-[.625rem]","flex items-stretch","text-left"),children:[(0,t.jsx)(ye.Z,{seed:e.address,className:(0,i.Z)("h-12 w-12 min-w-[3rem]","mr-2","bg-black/20","rounded-[.625rem]")}),(0,t.jsxs)("span",{className:(0,i.Z)("flex flex-col items-start min-w-0 text-sm leading-none",a&&"justify-center"),children:[(0,t.jsx)(A.Z,{wallet:e,theme:"small",className:(0,i.Z)(a&&"mb-1")}),(0,t.jsx)(k.ZP,{hash:e.address,className:"text-xs leading-none text-brand-inactivedark"}),!a&&(0,t.jsx)(S.Z,{address:e.address,isMinified:!0,copiable:!0,className:"font-bold mt-auto"})]})]}),Pe=(0,o.memo)((({className:e})=>{const a=(0,u.x0)();return(0,t.jsxs)("div",{className:(0,i.Z)(ke,e),children:[a&&(0,t.jsx)(je.Z,{network:a,className:"w-6 mr-2 min-w-[1.5rem]"}),(0,t.jsx)("span",{className:"truncate min-w-0",children:a?.name})]})})),Ze=(0,o.memo)((({className:e})=>(0,t.jsxs)("div",{className:(0,i.Z)(ke,e),children:[(0,t.jsx)(ve.r,{className:"h-6 w-6 mr-2 min-w-[1.5rem]"}),"Signing"]}))),Se=({values:e,currentValue:a,names:s,withError:r=!1,oneSuccess:n=!0})=>{const[l,c]=(0,o.useState)(0);return(0,o.useEffect)((()=>{c(e.findIndex((e=>e===a)))}),[a,e]),(0,t.jsxs)(te.aV,{className:(0,i.Z)("flex items-center","pl-1 pb-1","relative","after:h-px after:w-full","after:absolute after:bottom-0 after:left-0","after:border-b after:border-brand-main/[.07]"),children:[e.map(((e,l,o)=>{if("error"===e&&!r)return null;const c=e===a,d=l===o.length-1,m=!n&&r&&"error"!==e;return(0,t.jsx)(te.xz,{value:e,className:(0,i.Z)("text-sm","px-2 py-1","rounded-lg","transition-all","relative","flex flex-col items-center","w-[calc(25%-.25rem)]","before:content-[attr(data-text)]","before:h-0","before:invisible","before:pointer-events-none","before:overflow-hidden","before:font-bold","after:w-full after:h-px","after:absolute after:top-[calc(100%+0.25rem-1px)] after:left-0","after:border-b after:border-brand-main/[.2]","after:opacity-0 after:transition-opacity",!d&&"mr-1",c&&"font-bold",!c&&!m&&"hover:bg-brand-main/5 hover:after:opacity-100"),"data-text":s[e],disabled:m,children:(0,t.jsx)("span",{className:"truncate w-full",children:s[e]})},e)})),(0,t.jsx)("span",{className:(0,i.Z)("h-[2px] rounded-[1px]","block","absolute bottom-0 left-0","bg-buttonaccent","transition-all","w-[calc(25%-.3125rem)]"),style:{left:`calc(.25rem + ${25*l}% - ${.0625*l}rem)`}})]})};var Ae=s(41921),Fe=s(79189),Ee=s(18503);const Le=({tooltip:e,children:a,className:s})=>{const r=(0,t.jsx)("h2",{className:(0,i.Z)("text-xl font-bold",e?void 0:(0,i.Z)("mb-4",s)),children:a});return e?(0,t.jsxs)("div",{className:(0,i.Z)("flex items-center mb-4",s),children:[r,(0,t.jsx)(Z.Z,{content:e,size:"large",className:"ml-2",children:(0,t.jsx)(P.Z,{})})]}):r};var Ue,Ie=s(41693),Me=s(60340);function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},Ge.apply(this,arguments)}var Ye=function(e){return o.createElement("svg",Ge({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),Ue||(Ue=o.createElement("path",{fill:"#F8FCFD",d:"M12 11.125h6.125a.875.875 0 0 1 0 1.75H5.875a.875.875 0 0 1 0-1.75h5.25z"})))};var De;function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},Re.apply(this,arguments)}var Be=function(e){return o.createElement("svg",Re({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),De||(De=o.createElement("path",{fill:"#F8FCFD",d:"M12 5c.483 0 .875.392.875.875v5.25h5.25a.875.875 0 0 1 0 1.75h-5.25v5.25a.875.875 0 0 1-1.75 0v-5.25h-5.25a.875.875 0 1 1 0-1.75h5.25v-5.25c0-.483.392-.875.875-.875"})))};const Oe=(0,o.forwardRef)((({onMinusClick:e,onPlusClick:a,...s},r)=>(0,t.jsx)(Me.Z,{ref:r,labelActions:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Ie.Z,{theme:"primary",Icon:Ye,onClick:e,className:"ml-auto mr-1"}),(0,t.jsx)(Ie.Z,{theme:"primary",Icon:Be,onClick:a})]}),...s}))),Ve=(0,o.memo)((({accountAddress:e,originTx:a,overrides:s,onOverridesChange:r,fees:n,averageGasLimit:l,maxFee:i,averageFee:c,feeMode:d,setFeeMode:m})=>{const x=1===(0,u.xx)()?9:8,p=(0,o.useCallback)(((e,a)=>{r((s=>({...s,[e]:a??""})))}),[r]),h=(0,o.useCallback)(((e,a)=>{a||r((a=>({...a,[e]:null})))}),[r]),g=(0,o.useCallback)((e=>{e&&(m(e),r((e=>({...e,gasPrice:null,maxFeePerGas:null,maxPriorityFeePerGas:null}))))}),[m,r]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Le,{children:"Edit network fee"}),n&&l&&i&&c&&(0,t.jsx)(ze,{accountAddress:e,gasLimit:s.gasLimit??a.gasLimit,averageGasLimit:l,fees:n,maxFee:i,averageFee:c,value:d,onValueChange:g,className:"mb-8"}),a.maxPriorityFeePerGas?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Oe,{label:"Max base fee",placeholder:"0.00",thousandSeparator:!0,decimalScale:9,currency:"GWEI",tooltip:(0,t.jsx)(t.Fragment,{children:"When your transaction gets included in the block, any difference between your max base fee and the actual base fee will be refunded. Total amount is calculated as max base fee (in GWEI) * gas limit."}),tooltipProps:{size:"large",placement:"top"},value:ue(s.maxFeePerGas??a.maxFeePerGas,"gwei"),onChange:e=>p("maxFeePerGas",xe(e.target.value,"gwei")),onBlur:e=>h("maxFeePerGas",e.target.value),className:"mb-3",onMinusClick:()=>p("maxFeePerGas",pe({value:(s.maxFeePerGas??a.maxFeePerGas??0).toString(),decimals:x,operator:"minus"})),onPlusClick:()=>p("maxFeePerGas",pe({value:(s.maxFeePerGas??a.maxFeePerGas??0).toString(),decimals:x}))}),(0,t.jsx)(Oe,{label:"Priority fee",placeholder:"0.00",thousandSeparator:!0,decimalScale:9,currency:"GWEI",tooltip:(0,t.jsx)(t.Fragment,{children:"Priority fee (aka \u201cminer tip\u201d) goes directly to miners and incentivizes them to prioritize your transaction."}),tooltipProps:{size:"large",placement:"top"},value:ue(s.maxPriorityFeePerGas??a.maxPriorityFeePerGas,"gwei"),onChange:e=>p("maxPriorityFeePerGas",xe(e.target.value,"gwei")),onBlur:e=>h("maxPriorityFeePerGas",e.target.value),onMinusClick:()=>p("maxPriorityFeePerGas",pe({value:(s.maxPriorityFeePerGas??a.maxPriorityFeePerGas??0).toString(),decimals:x,operator:"minus"})),onPlusClick:()=>p("maxPriorityFeePerGas",pe({value:(s.maxPriorityFeePerGas??a.maxPriorityFeePerGas??0).toString(),decimals:x}))})]}):(0,t.jsx)(Oe,{label:"Gas Price",placeholder:"0.00",className:"mb-4",thousandSeparator:!0,decimalScale:9,currency:"GWEI",tooltip:(0,t.jsx)(t.Fragment,{children:"This network requires a \u201cGas price\u201d field when submitting a transaction. Gas price is the amount you will pay pay per unit of gas."}),value:ue(s.gasPrice??a.gasPrice,"gwei"),onChange:e=>p("gasPrice",xe(e.target.value,"gwei")),onBlur:e=>h("gasPrice",e.target.value),onMinusClick:()=>p("gasPrice",pe({value:(s.gasPrice??a.gasPrice??0).toString(),decimals:x,operator:"minus"})),onPlusClick:()=>p("gasPrice",pe({value:(s.gasPrice??a.gasPrice??0).toString(),decimals:x}))})]})})),ze=(0,o.memo)((({accountAddress:e,gasLimit:a,averageGasLimit:s,fees:r,averageFee:l,value:c,onValueChange:d,className:m})=>(a=(0,o.useMemo)((()=>BigInt(a)>BigInt(s)?s:a),[s,a]),(0,t.jsx)(Ae.fC,{type:"single",orientation:"horizontal",value:a*r.modes[c].max===l?c:void 0,onValueChange:d,className:(0,i.Z)("grid grid-cols-3 gap-2.5",m),children:n.ru.map((s=>{const n=a*r.modes[s].max;return(0,t.jsx)(qe,{accountAddress:e,value:s,fee:n,selected:n===l},s)}))})))),qe=({accountAddress:e,value:a,fee:s,selected:r})=>{const n=(0,u.dQ)(e),l=s&&n?.priceUSD?new ce.Z(s.toString()).div(new ce.Z(10).pow(n.decimals)).multipliedBy(n.priceUSD):new ce.Z(0);return(0,t.jsxs)(Ae.ck,{value:a,className:(0,i.Z)("relative","bg-brand-main/5","flex flex-col items-center","w-full py-2 px-1","rounded-[.625rem]","transition-colors","group",!r&&"hover:bg-brand-main/10",r&&"bg-brand-main/[.2]"),children:[(0,t.jsxs)("span",{className:"mb-1.5 text-sm items-center",children:[(0,t.jsx)("span",{className:"mr-1.5",children:de[a].icon}),de[a].name]}),(0,t.jsx)(Ee.Z,{amount:l,threeDots:!1,className:"text-sm font-bold mb-0.5 truncate"}),n&&(0,t.jsx)(Fe.Z,{amount:s.toString(),currency:n.symbol,decimals:n.decimals,threeDots:!1,className:(0,i.Z)("text-xs text-brand-inactivedark truncate","transition-colors",r&&"!text-brand-light")})]})};var _e=s(455),We=s(24271);const $e=(0,o.memo)((({originTx:e,finalTx:a,overrides:s,onOverridesChange:r})=>{const n=(0,o.useMemo)((()=>ee.Y.from(a).unsignedSerialized),[a]),l=(0,o.useCallback)(((e,a)=>{r((s=>({...s,[e]:a??""})))}),[r]),i=(0,o.useCallback)(((e,a)=>{a||r((a=>({...a,[e]:null})))}),[r]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Le,{children:"Advanced settings"}),(0,t.jsx)(Oe,{label:"Gas Limit",placeholder:"0",thousandSeparator:!0,decimalScale:0,name:"gasLimit",tooltip:(0,t.jsx)(t.Fragment,{children:"Gas limit is the maximum units of gas you are willing to use. Units of gas are a multiplier to \u201cMax priority fee\u201d and \u201cMax fee\u201d."}),tooltipProps:{size:"large",placement:"top"},value:ue(s.gasLimit??e.gasLimit),onChange:e=>l("gasLimit",xe(e.target.value)),onBlur:e=>i("gasLimit",e.target.value),className:"mb-3",onMinusClick:()=>l("gasLimit",pe({value:(s.gasLimit??e.gasLimit??0).toString(),decimals:3,operator:"minus"})),onPlusClick:()=>l("gasLimit",pe({value:(s.gasLimit??e.gasLimit??0).toString(),decimals:3}))}),(0,t.jsx)(Oe,{label:"Nonce",placeholder:"0",thousandSeparator:!0,decimalScale:0,name:"nonce",tooltip:(0,t.jsx)(t.Fragment,{children:"The nonce is the number of transactions sent from a given address. Each time you send a transaction, the nonce value increases by 1."}),tooltipProps:{size:"large",placement:"top"},value:ue(s.nonce??e.nonce),onChange:e=>l("nonce",xe(e.target.value)),onBlur:e=>i("nonce",e.target.value),className:"mb-3",onMinusClick:()=>l("nonce",pe({value:(s.nonce??e.nonce??0).toString(),decimals:0,operator:"minus"})),onPlusClick:()=>l("nonce",pe({value:(s.nonce??e.nonce??0).toString(),decimals:0}))}),(0,t.jsx)(We.Z,{label:"Data",readOnly:!0,tooltip:(0,t.jsx)(t.Fragment,{children:"The byte representation of the data that will be sent to a smart contract."}),tooltipProps:{size:"large",placement:"top"},value:_e.Dv(e.data??"0x00"),textareaClassName:"!h-36 mb-3"}),(0,t.jsx)(We.Z,{label:"Raw transaction",readOnly:!0,tooltip:(0,t.jsx)(t.Fragment,{children:"The byte representation of the complete transaction."}),tooltipProps:{size:"large",placement:"top"},value:n,textareaClassName:"!h-48"})]})}));var He=s(53166),Je=s(60193),Qe=s(1426),Ke=s(16019),Xe=s(55420),ea=s(650);const aa=({source:e})=>{if("self"===e.type&&e.swapMeta){const a=e.swapMeta;return(0,t.jsx)(ma,{label:"Swap info",flexAlignPosition:"items-center",children:(0,t.jsxs)("div",{className:(0,i.Z)("flex flex-col items-center justify-center","w-fit"),children:[(0,t.jsxs)("div",{className:"inline-flex",children:[(0,t.jsx)(Fe.Z,{amount:a.fromAmount,decimals:a.fromToken.decimals,currency:a.fromToken.symbol,threeDots:!1,copiable:!0,className:(0,i.Z)("text-xs ml-1.5","font-bold")})," ",(0,t.jsx)("img",{src:a.fromToken.logoURI,alt:a.fromToken.name,className:"ml-1 mr-2 w-4 h-4 rounded-full"})]}),(0,t.jsx)("div",{className:(0,i.Z)("text-xs font-bold"),style:{transform:"rotate(90deg)"},children:" \u2192"}),(0,t.jsxs)("div",{className:"inline-flex",children:[(0,t.jsx)(Fe.Z,{amount:a.toAmount,decimals:a.toToken.decimals,currency:a.toToken.symbol,threeDots:!1,copiable:!0,className:(0,i.Z)("text-xs ml-1.5","font-bold")})," ",(0,t.jsx)("img",{src:a.toToken.logoURI,alt:a.toToken.name,className:"ml-1 w-4 h-4 rounded-full"})]})]})})}return null},sa=({accountAddress:e,fees:a,gasLimit:s,averageGasLimit:r,maxFee:l,averageFee:c,feeMode:d,action:m,source:x,onFeeButtonClick:p})=>{const h=(0,o.useMemo)((()=>ta(m,x)),[m,x]),g=(0,o.useMemo)((()=>m.type===n.UY.TokenApprove&&!m.clears),[m]),f=(0,u.x0)(),w=(0,u.B9)(f),v="cancel"===x.replaceTx?.type||"cancel"===x.replaceTx?.prevReplaceTxType;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Le,{className:(0,i.Z)("flex items-center w-full",g?"!mb-1":""),children:[v?"Cancel transaction":h,"speedup"===x.replaceTx?.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"flex-1"}),(0,t.jsxs)("span",{className:"text-xs text-brand-inactivedark font-medium inline-flex items-center",children:[(0,t.jsx)(ea.r,{className:"w-3 h-3 mr-1"}),"Speed up"]})]})]}),g&&(0,t.jsx)("p",{className:"text-sm text-[#BCC3C4] mb-3",children:"self"===x.type&&x.swapMeta?(0,t.jsx)(t.Fragment,{children:"By granting this permission, you're allowing this smart-contract to automate transactions for you."}):(0,t.jsxs)(t.Fragment,{children:["Do you trust this site? By granting this permission, you're allowing"," ",(0,t.jsx)("span",{className:"font-semibold",children:"page"===x.type&&x.url?new URL(x.url).host:"this site"})," ","to withdraw tokens and automate transactions for you."]})}),(0,t.jsx)(ra,{accountAddress:e,fees:a,gasLimit:s,averageGasLimit:r,maxFee:l,averageFee:c,feeMode:d,onClick:p}),v?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ma,{label:"Transaction",children:(0,t.jsx)("div",{className:"flex flex-col items-end",children:(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(u.pl,{children:[(0,t.jsx)(k.ZP,{hash:x.replaceTx.prevTxHash,className:"text-sm",startLength:8,endLength:6}),w&&(0,t.jsx)(Ie.Z,{href:w.tx(x.replaceTx.prevTxHash),"aria-label":"View in Explorer",Icon:we.r,className:"!w-6 !h-6 ml-2",iconClassName:"!w-[1.125rem]"})]})})})})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(la,{action:m}),(0,t.jsx)(ca,{accountAddress:e,action:m}),(0,t.jsx)(aa,{source:x})]})]})},ta=(e,a)=>{switch(e.type){case n.UY.TokenTransfer:return"Transfer tokens";case n.UY.TokenApprove:return e.clears?"Revoke tokens approval":"self"===a.type&&a.swapMeta?"Approve tokens for swap":"Approve tokens";case n.UY.ContractInteraction:return"self"===a.type&&a.swapMeta?a.swapMeta.fromChainId!==a.swapMeta.toChainId?"Bridge transaction":"Swap transaction":"Interact with contract";default:return"Deploy contract"}},ra=({accountAddress:e,gasLimit:a,averageGasLimit:s,fees:r,maxFee:n,averageFee:l,feeMode:c,onClick:d})=>{a=(0,o.useMemo)((()=>a>s?s:a),[s,a]);const m=(0,u.dQ)(e),x=l?new ce.Z(l.toString()):null,p=(a*r.modes[c].max).toString(),h=!x?.eq(p),g=m?.priceUSD&&x?x.div(new ce.Z(10).pow(m.decimals)).multipliedBy(m.priceUSD):new ce.Z(0);return(0,t.jsxs)("button",{type:"button",className:(0,i.Z)("w-full","rounded-[.625rem]","flex items-center","py-3 pr-2 pl-4 mb-3","bg-brand-main/5","transition-colors","hover:bg-brand-main/10"),onClick:d,children:[(0,t.jsxs)("span",{className:"flex flex-col grow",children:[(0,t.jsxs)("span",{className:(0,i.Z)("flex items-center justify-between","mb-0.5","text-sm"),children:["Network fee",x?(0,t.jsxs)("span",{className:"ml-auto flex items-center",children:[(0,t.jsx)(Fe.Z,{amount:x,currency:m?.symbol,decimals:m?.decimals,threeDots:!1,className:""}),(0,t.jsx)(Qe.Z,{}),(0,t.jsx)(Ee.Z,{amount:g,threeDots:!1,className:"font-bold"})]}):null]}),(0,t.jsxs)("span",{className:(0,i.Z)("flex items-center justify-between","text-xs"),children:[(0,t.jsx)(na,{feeMode:h?"custom":c}),n&&m?(0,t.jsxs)("span",{className:"",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Max fee:"}),(0,t.jsx)(Fe.Z,{amount:n.toString(),decimals:m.decimals,currency:m.symbol,threeDots:!1,className:"ml-2 mb-0"})]}):null]})]}),(0,t.jsx)(Xe.r,{className:"w-6 h-auto ml-2"})]})},na=({feeMode:e})=>{const{icon:a,name:s}="custom"===e?me:de[e];return(0,t.jsxs)("span",{className:(0,i.Z)("py-0.5 pl-1.5 pr-2.5","rounded-md","border border-brand-main/[.07] text-sm","flex items-center"),children:[(0,t.jsx)("span",{className:"mr-1.5 text-xs",children:a}),(0,t.jsx)("span",{className:"-mt-px text-xs",children:s})]})},la=({action:e})=>{const a=(0,u.x0)(),s=(0,u.B9)(a),r=(0,o.useMemo)((()=>oa(e)),[e]),l=(0,o.useMemo)((()=>ia(e)),[e]);return l?(0,t.jsx)(ma,{label:r,children:(0,t.jsxs)("div",{className:"flex flex-col items-end",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(u.pl,{children:[(0,t.jsx)(k.ZP,{hash:l,className:"text-sm"}),s&&(0,t.jsx)(Ie.Z,{href:s.address(l),"aria-label":"View in Explorer",Icon:we.r,className:"!w-6 !h-6 ml-2",iconClassName:"!w-[1.125rem]"})]})}),e.type===n.UY.TokenTransfer&&(0,t.jsx)(Je.Z,{address:l,isAddable:!1,className:"mt-2 mb-0"})]})}):null},oa=e=>{switch(e.type){case n.UY.TokenApprove:return e.clears?"Revoke from":"Approve to";case n.UY.ContractInteraction:return"Contract address";default:return"Recipient"}},ia=e=>e.type===n.UY.TokenTransfer||e.type===n.UY.TokenApprove?e.toAddress:e.type===n.UY.ContractInteraction?e.contractAddress:null,ca=({accountAddress:e,action:a})=>{const s=(0,u.x0)(),r=(0,u.B9)(s),n=(0,o.useMemo)((()=>da(a)),[a]);return n?(0,t.jsx)(ma,{label:n.length>1?"Tokens":"Token",children:"string"===typeof n?(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(u.pl,{children:[(0,t.jsx)(k.ZP,{hash:n,className:"text-sm"}),r&&(0,t.jsx)(Ie.Z,{href:r.address(n),"aria-label":"View in Explorer",Icon:we.r,className:"!w-6 !h-6 ml-2",iconClassName:"!w-[1.125rem]"})]})}):(0,t.jsx)("div",{className:"flex flex-col min-w-0",children:n.map(((a,s)=>(0,t.jsx)(Ke.Z,{accountAddress:e,token:a,className:(0,i.Z)(s!==n.length-1&&"mb-2")},a.slug)))})}):null},da=e=>{if(e.type===n.UY.TokenTransfer)return e.tokens;if(e.type===n.UY.TokenApprove){if(e.tokenSlug&&(void 0!==e.amount||e.clears))return[{slug:e.tokenSlug,amount:e.clears?void 0:e.amount}];if(e.allTokensContract)return e.allTokensContract}return e.type===n.UY.ContractInteraction&&e.nativeTokenAmount&&BigInt(e.nativeTokenAmount)>0n?[{slug:He.mg,amount:e.nativeTokenAmount}]:null},ma=({label:e,flexAlignPosition:a="items-start",children:s})=>(0,t.jsxs)("div",{className:`py-3 pl-4 flex ${a} items-start justify-between`,children:[(0,t.jsx)("h3",{className:"text-sm mr-5",children:e}),s]}),{keccak256:ua,recoverAddress:xa,getAddress:pa}=X,ha=["details","fee","advanced","error"],ga={details:"Details",fee:"Fee",advanced:"Advanced",error:"Error"},fa=({approval:e})=>{const{accountAddress:a,txParams:s,source:l}=e,c=(0,u.xx)(),{allAccounts:x}=(0,u.xe)(),p=(0,u.xq)(),h=(0,d.Dv)((0,m.yq)({chainId:c,accountAddress:a}));(0,u.CO)(c,a);const g=(0,o.useMemo)((()=>x.find((a=>a.address===e.accountAddress))),[e,x]),f=(0,u.yL)(),w=(0,oe.c)(),[v,b]=(0,o.useState)("details"),[j,N]=(0,o.useState)("average"),[k,T]=(0,o.useState)(!1),[P,Z]=(0,o.useState)(null),[S,A]=(0,o.useState)(!1),F=(0,o.useRef)(S);F.current!==S&&(F.current=S);const[E,L]=(0,o.useState)(null),[U,I]=(0,o.useState)(),[M,G]=(0,o.useState)({}),Y=U?.fees,D=(0,o.useMemo)((()=>{if(!U)return null;const a=U.tx.clone();a.nonce=e.source?.replaceTx?a.nonce:(0,ne.l1)(a,h);const s=U.fees?.modes[j];return s&&(U.tx.maxPriorityFeePerGas?(a.maxFeePerGas=s.max,"priority"in s&&(a.maxPriorityFeePerGas=s.priority)):a.gasPrice=s.max),a}),[e.source,U,j,h]),R=(0,o.useMemo)((()=>{if(!D)return D;const e=D.clone();for(const[a,s]of Object.entries(M))(s||0===s)&&(e[a]=s);return e}),[D,M]),B=(0,o.useMemo)((()=>{if(!R)return null;try{const e=R.maxFeePerGas||R.gasPrice;return R.gasLimit*e}catch{return null}}),[R]),O=(0,o.useMemo)((()=>{if(!R||!U?.estimatedGasLimit)return null;try{const e=U.estimatedGasLimit<R.gasLimit?U.estimatedGasLimit:R.gasLimit;return e*(R.maxFeePerGas||R.gasPrice)}catch{return null}}),[R,U?.estimatedGasLimit]),V=(0,o.useMemo)(re.C,[]),z=(0,o.useCallback)((()=>V((async()=>{if(!F.current){T(!0);try{const{gasLimit:e,...a}=s;delete a.type,delete a.gasPrice,delete a.maxFeePerGas,delete a.maxPriorityFeePerGas;const t=await(0,r.wn)(f).catch((()=>null)),[n,l]=await Promise.all([se()((()=>f.getVoidSigner(g.address).populateTransaction({...a,nonce:a.nonce?+a.nonce:void 0,type:"legacy"===t?.type?0:void 0,chainId:a.chainId?+a.chainId:void 0,..."modern"===t?.type?{maxFeePerGas:t.modes.low.max,maxPriorityFeePerGas:t.modes.low.priority}:"legacy"===t?.type?{gasPrice:t.modes.average.max}:{}})),{retries:2,minTimeout:0,maxTimeout:0}),!1]);delete n.from;const o=BigInt(n.gasLimit),i=5n*o/4n,c=3n*o/2n,d=ee.Y.from({...n,nonce:n.nonce?+n.nonce:void 0,gasLimit:e&&i<=BigInt(e)?BigInt(e):c});Z((e=>"estimation"===e?.from?null:e)),I({tx:d,estimatedGasLimit:o,fees:t,destinationIsContract:l})}catch(e){Z({from:"estimation",error:e})}T(!1)}}))),[V,T,I,Z,f,g.address,s]);(0,o.useEffect)((()=>{(0,le.m9)(f,s).then((e=>e&&L(e))).catch(console.warn)}),[f,s]),(0,o.useEffect)((()=>{z()}),[z]),(0,u.kw)(z),(0,o.useEffect)((()=>{b(P?"error":"details")}),[b,P]),(0,o.useEffect)((()=>{if(E)switch(E.type){case n.UY.TokenTransfer:E.tokens.forEach((({slug:e})=>{(0,r.pS)(c,a,e)}));break;case n.UY.TokenApprove:E.tokenSlug&&(0,r.pS)(c,a,E.tokenSlug);break;default:return}}),[E,c,a]);const q=(0,o.useCallback)((async a=>{Z(null),A(!0);try{await(0,y.u)((async()=>{if(!a)return void await(0,r.ww)(e.id,{approved:a});if(!R){if(P)throw P.error;return}if(await f.getBalance(g.address)<(R.gasLimit*(R.maxFeePerGas??R.gasPrice)+R.value??0n))throw new Error(`Not enough ${p?.symbol?`${p.symbol} token balance`:"funds"} to cover the network (gas) fee. Or the transaction may require a manual fee and a "gas limit" setting.`);const s=ee.Y.from(R).unsignedSerialized;if(g.source!==n.iL.Ledger)await(0,r.ww)(e.id,{approved:a,rawTx:s});else{let t,n;if(await w((async({ledgerEth:e})=>{try{const a=await e.signTransaction(g.derivationPath,s.substring(2)),r={v:Number("0x"+a.v),r:"0x"+a.r,s:"0x"+a.s},n=ua(s),l=xa(n,r);if(pa(l)!==pa(g.address))throw new Error("Ledger: The signature doesnt match the right address");t=r}catch(e){n=e}})),!t)throw n??new Error("Failed to sign transaction with Ledger");await(0,r.ww)(e.id,{approved:a,rawTx:s,signature:t})}}))}catch(e){Z({from:"submit",error:e})}finally{A(!1)}}),[e,g,P,Z,A,R,f,w,p]),_=(0,o.useRef)(!0),$=(0,o.useCallback)((()=>{_.current=!1}),[]);return(0,o.useEffect)((()=>{(0,r.L9)(r.fU.DappTransaction,{source:l.type})}),[l.type]),(0,t.jsxs)(W,{approveText:"submit"===P?.from?"Retry":"Approve",onApprove:q,disabled:k,approving:S,className:"!pt-7",children:[(0,t.jsx)(Ne,{account:g,source:l}),(0,t.jsxs)(te.fC,{defaultValue:"details",orientation:"horizontal",value:v,onValueChange:e=>b(e),className:"mt-5 w-full flex flex-col min-h-0",children:[(0,t.jsx)(Se,{"aria-label":"Approve tabs",values:ha,currentValue:v,names:ga,withError:Boolean(P),oneSuccess:Boolean(U)}),(0,t.jsx)(u.$J,{children:e=>(0,t.jsxs)(C.Z,{ref:e,className:"w-full box-content -mr-5 pr-5",viewPortClassName:"viewportBlock pt-5",scrollBarClassName:"pt-5 pb-0",children:[(0,t.jsx)(te.VY,{value:"details",children:Y&&D&&E?(0,t.jsx)("div",{className:(0,i.Z)("w-full",_.current&&"animate-bootfadeinfast"),onAnimationEnd:$,children:(0,t.jsx)(sa,{accountAddress:a,fees:Y,averageGasLimit:U.estimatedGasLimit,gasLimit:M.gasLimit||D.gasLimit,feeMode:j,maxFee:B,averageFee:O,action:E,source:l,onFeeButtonClick:()=>b("fee")})}):(0,t.jsx)(wa,{})}),(0,t.jsx)(te.VY,{value:"fee",children:D?(0,t.jsx)(Ve,{accountAddress:a,originTx:D,fees:Y??null,averageGasLimit:U?.estimatedGasLimit??null,feeMode:j,setFeeMode:N,maxFee:B,averageFee:O,overrides:M,onOverridesChange:G}):(0,t.jsx)(wa,{})}),(0,t.jsx)(te.VY,{value:"advanced",children:D&&R?(0,t.jsx)($e,{originTx:D,finalTx:R,overrides:M,onOverridesChange:G}):(0,t.jsx)(wa,{})}),(0,t.jsx)(te.VY,{value:"error",children:P&&(0,t.jsx)(We.Z,{readOnly:!0,textareaClassName:"!h-48",value:P?.error.reason||P?.error.message||"Unknown error."})})]})})]})]})},wa=()=>{const[e,a]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const e=setTimeout((()=>a(!0)),150);return()=>clearTimeout(e)}),[a]),(0,t.jsx)("div",{className:(0,i.Z)(e?"animate-bootfadeinfast":"hidden","min-h-[200px] flex items-center justify-center","text-white text-lg text-semibold"),children:(0,t.jsx)("div",{className:"atom-spinner w-12 h-12"})})};var va=s(10232),ba=s(4871),ya=s(51091),ja=s(85816),Na=s(67099);const ka=(0,o.lazy)((()=>s.e(853).then(s.t.bind(s,93853,23)))),{toUtf8String:Ca,hexlify:Ta,getAddress:Pa}=X,Za=({approval:e})=>{const a=(0,d.Dv)(m.P8),s=(0,o.useMemo)((()=>a.find((a=>a.address===e.accountAddress))),[e,a]),{alert:l}=(0,b.Rh)(),i=(0,oe.c)(),[c,u]=(0,o.useState)(!0),[x,p]=(0,o.useState)(!1);(0,o.useEffect)((()=>{const e=setTimeout((()=>u(!1)),500);return()=>clearTimeout(e)}),[u]);const h=(0,o.useMemo)((()=>{try{switch(e.standard){case n.xd.PersonalSign:try{return Ca(e.message)}catch{return e.message}case n.xd.SignTypedDataV1:return e.message;case n.xd.SignTypedDataV3:case n.xd.SignTypedDataV4:return JSON.parse(e.message);default:throw new Error("Unhandled Signing standard")}}catch(e){}return null}),[e]),g=(0,o.useCallback)((async a=>{p(!0);try{await(0,y.u)((async()=>{if(!a||s.source!==n.iL.Ledger)return void await(0,r.ww)(e.id,{approved:a});let t,l;if(await i((async({ledgerEth:a})=>{try{let r;switch(e.standard){case n.xd.PersonalSign:r=await a.signPersonalMessage(s.derivationPath,Ta(e.message).substring(2));break;case n.xd.SignTypedDataV1:case n.xd.SignTypedDataV3:throw new Error("Ledger: Only version 4 of typed data signing is supported");case n.xd.SignTypedDataV4:let t,l;try{const{domain:a,types:s,primaryType:r,message:n}=ya.TypedDataUtils.sanitizeData(JSON.parse(e.message));t=ya.TypedDataUtils.hashStruct("EIP712Domain",a,s,ya.SignTypedDataVersion.V4).toString("hex"),l=ya.TypedDataUtils.hashStruct(r,n,s,ya.SignTypedDataVersion.V4).toString("hex")}catch{throw new Error("Invalid message")}r=await a.signEIP712HashedMessage(s.derivationPath,t,l);break;default:throw new Error("Unhandled Signing standard")}if(r){let a;switch(t=va.P.from({v:r.v,r:"0x"+r.r,s:"0x"+r.s}).serialized,e.standard){case n.xd.PersonalSign:a=(0,ya.recoverPersonalSignature)({data:h,signature:t});break;case n.xd.SignTypedDataV4:a=(0,ya.recoverTypedSignature)({version:ya.SignTypedDataVersion.V4,data:h,signature:t});break;default:throw new Error("Unhandled Signing standard")}if(Pa(a)!==Pa(s.address))throw new Error("Ledger: The signature doesnt match the right address")}}catch(e){l=e}})),!t)throw l??new Error("Failed to sign with Ledger");await(0,r.ww)(e.id,{approved:a,signedMessage:t})}))}catch(e){l({title:"Error",content:e?.message??"Unknown error occured"})}finally{p(!1)}}),[e,s,p,l,i,h]);return(0,o.useEffect)((()=>{(0,r.L9)(r.fU.DappSigning)}),[]),h?(0,t.jsxs)(W,{approveText:"Sign",onApprove:g,disabled:c,approving:x,className:"!pt-7",children:[(0,t.jsx)(Ne,{account:s,source:e.source,signing:!0,className:"mb-8"}),(0,t.jsx)("h3",{className:"mb-4 text-xl font-bold",children:"Your signature is being requested"}),(0,t.jsx)(Sa,{standard:e.standard,message:h})]}):null},Sa=({standard:e,message:a})=>{const{copy:s,copied:r}=(0,ba.m)("string"===typeof a?a:JSON.stringify(a,null,2)),n=(0,t.jsx)("span",{className:"text-xs text-brand-inactivedark2 self-end",children:e}),l=(0,t.jsxs)(U.Z,{theme:"tertiary",onClick:()=>s(),className:(0,i.Z)("absolute bottom-3 right-3","text-sm text-brand-light","!p-0 !pr-1 !min-w-0","!font-normal","items-center"),children:[r?(0,t.jsx)(ja.r,{className:"mr-1"}):(0,t.jsx)(Na.r,{className:"mr-1"}),r?"Copied":"Copy"]}),o="!h-[20rem]";return(0,t.jsx)(C.Z,{className:"w-full box-content -mr-5 pr-5",viewPortClassName:"viewportBlock pt-5",scrollBarClassName:"pt-5 pb-0",children:"string"===typeof a?(0,t.jsx)(We.Z,{label:"Message",readOnly:!0,textareaClassName:o,value:a,actions:l,labelActions:n,hoverStyles:!1}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Aa,{action:n,children:"Message"}),(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)("div",{className:(0,i.Z)("w-full",o,"py-3 px-4","box-border","text-sm text-brand-light","bg-black/20","border border-brand-main/10","rounded-[.625rem]","overflow-auto"),children:(0,t.jsx)(ka,{src:a,theme:"harmonic",iconStyle:"triangle",name:null,indentWidth:3,collapsed:!1,collapseStringsAfterLength:42,enableClipboard:!1,displayObjectSize:!1,displayDataTypes:!1,style:{backgroundColor:"none"},sortKeys:!0})}),l]})]})})},Aa=({children:e,action:a})=>(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 mb-2 min-h-6",children:[(0,t.jsx)("div",{className:"text-base text-brand-gray cursor-pointer flex align-center",children:e}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"flex-1"}),a]})]});var Fa,Ea,La=s(87380),Ua=s(94316);function Ia(){return Ia=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},Ia.apply(this,arguments)}var Ma=function(e){return o.createElement("svg",Ia({xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none",viewBox:"0 0 22 22"},e),Fa||(Fa=o.createElement("path",{fill:"#8D9C9E",d:"M1.889 7.226a4.707 4.707 0 0 1 1.333-4.004 4.707 4.707 0 0 1 4.004-1.333A4.707 4.707 0 0 1 11 0c1.544 0 2.914.742 3.774 1.889a4.707 4.707 0 0 1 4.004 1.333 4.707 4.707 0 0 1 1.333 4.004A4.707 4.707 0 0 1 22 11a4.707 4.707 0 0 1-1.889 3.774 4.707 4.707 0 0 1-1.333 4.004 4.707 4.707 0 0 1-4.004 1.333A4.707 4.707 0 0 1 11 22a4.707 4.707 0 0 1-3.774-1.889 4.707 4.707 0 0 1-4.004-1.333 4.707 4.707 0 0 1-1.333-4.004A4.707 4.707 0 0 1 0 11c0-1.544.742-2.914 1.889-3.774"})),Ea||(Ea=o.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeWidth:2,d:"m7.125 11.773 2.413 2.358a.25.25 0 0 0 .378-.033l4.782-6.634"})))};const Ga=({approval:e})=>{const{alert:a}=(0,b.Rh)(),[s,n]=(0,o.useState)(!1),l=(0,o.useCallback)((async s=>{n(!0);try{await(0,y.u)((async()=>{s&&await(0,Ua.Ru)(e.networkParams),await(0,r.ww)(e.id,{approved:s})}))}catch(e){a({title:"Error",content:e?.message??"Unknown error occurred"})}finally{n(!1)}}),[e,n,a]);return"page"!==e.source.type?null:(0,t.jsxs)(W,{approveText:"Add network",declineText:"Deny",className:"items-center",approving:s,onApprove:l,children:[(0,t.jsx)(Y,{firstLogoUrl:e.networkParams.iconUrls?.[0]??(0,La.A2)("icons/network/unknown.png"),dappLogoUrl:e.source.favIconUrl}),(0,t.jsx)("h1",{className:"text-2xl font-bold mt-4 mb-1",children:"Add custom network"}),(0,t.jsxs)("span",{className:"text-base text-center mb-6",children:["requested by ",(0,t.jsx)("strong",{children:new URL(e.source.url).host})]}),(0,t.jsx)(Ya,{info:e.networkParams}),(0,t.jsx)(Da,{})]})},Ya=({info:e})=>{const a=[{label:"Name",value:e.chainName},{label:"RPC URL",value:e.rpcUrls[0]},{label:"Chain ID",value:parseInt(e.chainId)},{label:"Currency symbol",value:e.nativeCurrency.symbol},{label:"Block explorer",value:e.blockExplorerUrls?.[0]}];return(0,t.jsx)(C.Z,{className:"w-full h-full box-content -mr-5 pr-5 grow",viewPortClassName:"viewportBlock",children:a.map((({label:e,value:s},r)=>(0,t.jsxs)("div",{className:(0,i.Z)("px-3 py-2.5 text-sm w-full flex border-b border-brand-main/[.07]",0===r?"pt-0":"",r===a.length-1?"border-none":""),children:[(0,t.jsx)("span",{className:"w-[45%] text-brand-gray",children:e}),(0,t.jsx)("span",{className:"w-[55%] text-brand-light font-medium text-right break-words",children:s??"N/A"})]},e)))})},Da=()=>(0,t.jsxs)("div",{className:"flex items-center py-3 border-y border-brand-main/[.07] mt-auto text-brand-inactivedark text-sm px-3",children:[(0,t.jsx)(Ma,{className:"w-[1.375rem] min-w-[1.375rem] h-auto mr-4"}),"Be careful switching to unknown networks, verify details before switching"]});var Ra=s(18159);const Ba=()=>(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(Oa,{}),(0,t.jsx)(Ra.Z,{small:!0})]}),Oa=()=>{const e=(0,d.Dv)(m.zv);return(0,c.EQ)(e).with(n.PR.Unlocked,(()=>(0,t.jsx)(Va,{}))).with(n.PR.Locked,(()=>(0,t.jsx)(p.Z,{isApproval:!0}))).otherwise((()=>(0,t.jsx)(qa,{})))},Va=()=>{const e=(0,d.Dv)(m.pX),a=e[0],s=e.length>1;return a?(0,t.jsx)("div",{className:(0,i.Z)("w-full h-screen","flex flex-col items-center justify-center",s&&"pt-10"),children:(0,t.jsxs)(o.Suspense,{fallback:null,children:[s&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.pl,{children:(0,t.jsxs)("div",{className:(0,i.Z)("-mt-10 h-10","w-full max-w-[440px]","px-4 flex items-center"),children:[(0,t.jsx)(he.Z,{theme:"small",readOnly:!0}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsx)("button",{type:"button",className:(0,i.Z)("px-2 py-1","text-xs text-brand-inactivelight hover:text-brand-light","transition-colors","font-semibold"),onClick:()=>(0,r.re)(),children:"Reject all"})]})}),(0,t.jsx)("div",{className:(0,i.Z)("-mb-[1.5rem]","w-[calc(100%-2rem)] max-w-[408px]","h-[2rem]","rounded-xl border border-brand-main/[.07] shadow-approvestack","brandbg-popup","opacity-40","z-[-1]")})]}),(0,t.jsx)(za,{approval:a},a.id)]})}):(0,t.jsx)(qa,{})},za=(0,o.memo)((({approval:e})=>(0,c.EQ)(e).with({type:n.T8.Connection},(e=>(0,t.jsx)($,{approval:e}))).with({type:n.T8.Transaction},(e=>(0,t.jsx)(u.nw,{chainId:e.chainId,children:(0,t.jsx)(fa,{approval:e})}))).with({type:n.T8.Signing},(e=>(0,t.jsx)(Za,{approval:e}))).with({type:n.T8.AddNetwork},(e=>(0,t.jsx)(Ga,{approval:e}))).otherwise((()=>null)))),qa=()=>((0,o.useLayoutEffect)((()=>{window.close()}),[]),null);r._K.connect(n.Kx.Wallet),(0,l.L)((0,t.jsx)(Ba,{}))},96934:(e,a,s)=>{"use strict";s.d(a,{as:()=>m,m9:()=>d});var t=s(79554),r=s(5556),n=s(11126),l=s(98964),o=s(54773),i=s(85350),c=s(53166);async function d(e,a){if(!a.to)return f(a.data)?null:{type:i.UY.ContractDeployment};const s=g(a.to);if(f(a.data))return{type:i.UY.TokenTransfer,toAddress:s,tokens:[{slug:c.mg,amount:g(a.value??0)}]};const t=()=>({type:i.UY.ContractInteraction,contractAddress:s,nativeTokenAmount:a.value&&!f(a.value)?g(a.value):void 0}),r=function(e){const a=[];try{a.push([i.Yn.ERC20,u.parseTransaction({data:e})])}catch{}try{a.push([i.Yn.ERC721,x.parseTransaction({data:e})])}catch{}try{a.push([i.Yn.ERC1155,p.parseTransaction({data:e})])}catch{}return a}(a.data);if(0===r.length)return t();const n=await h(e,s,r);return(0,l.EQ)(n).with([i.Yn.ERC20,{name:"transfer"}],(([e,{args:a}])=>({type:i.UY.TokenTransfer,toAddress:g(a[0]),tokens:[{slug:(0,c.Vy)({standard:e,address:s,id:"0"}),amount:g(a[1])}]}))).with([i.Yn.ERC20,{name:"approve"}],(([e,{args:a}])=>({type:i.UY.TokenApprove,toAddress:g(a[0]),tokenSlug:(0,c.Vy)({standard:e,address:s,id:"0"}),amount:g(a[1]),clears:f(a[1])}))).with([i.Yn.ERC20,{name:"transferFrom"}],(([e,{args:a}])=>({type:i.UY.TokenTransfer,toAddress:g(a[1]),tokens:[{slug:(0,c.Vy)({standard:e,address:s,id:"0"}),amount:g(a[2])}],fromAddress:g(a[0])}))).with([i.Yn.ERC721,{name:"safeTransferFrom"}],(([e,{args:a}])=>({type:i.UY.TokenTransfer,toAddress:g(a[1]),tokens:[{slug:(0,c.Vy)({standard:e,address:s,id:g(a[2])}),amount:"1"}],fromAddress:g(a[0])}))).with([i.Yn.ERC721,{name:"transferFrom"}],(([e,{args:a}])=>({type:i.UY.TokenTransfer,toAddress:g(a[1]),tokens:[{slug:(0,c.Vy)({standard:e,address:s,id:g(a[2])}),amount:"1"}],fromAddress:g(a[0])}))).with([i.Yn.ERC721,{name:"approve"}],(([e,{args:a}])=>({type:i.UY.TokenApprove,toAddress:g(a[0]),tokenSlug:(0,c.Vy)({standard:e,address:s,id:g(a[1])}),clears:f(a[0])}))).with([i.Yn.ERC721,{name:"setApprovalForAll",args:l.P.select()}],(e=>({type:i.UY.TokenApprove,toAddress:g(e[0]),clears:Boolean(e[1]),allTokensContract:a.to}))).with([i.Yn.ERC1155,{name:"setApprovalForAll",args:l.P.select()}],(e=>({type:i.UY.TokenApprove,toAddress:g(e[0]),clears:Boolean(e[1]),allTokensContract:a.to}))).with([i.Yn.ERC1155,{name:"safeTransferFrom"}],(([e,{args:a}])=>({type:i.UY.TokenTransfer,toAddress:g(a[1]),tokens:[{slug:(0,c.Vy)({standard:e,address:s,id:g(a[2])}),amount:g(a[3])}],fromAddress:g(a[0]),data:f(a[4])?void 0:g(a[4])}))).with([i.Yn.ERC1155,{name:"safeBatchTransferFrom"}],(([e,{args:a}])=>({type:i.UY.TokenTransfer,toAddress:g(a[1]),tokens:a[2].map(((t,r)=>({slug:(0,c.Vy)({standard:e,address:s,id:g(t)}),amount:g(a[3][r])}))),fromAddress:g(a[0]),data:f(a[4])?void 0:g(a[4])}))).otherwise(t)}async function m(e,a){const s=[];return await Promise.all(a.map((async a=>{const t=function(e){const a=[];try{a.push([i.Yn.ERC20,u.parseLog(e)])}catch{}try{a.push([i.Yn.ERC721,x.parseLog(e)])}catch{}try{a.push([i.Yn.ERC1155,p.parseLog(e)])}catch{}return a}(a);if(0===t.length)return;const r=g(a.address),n=await h(e,r,t);(0,l.EQ)(n).with([i.Yn.ERC20,{name:"Transfer"}],(([e,{args:a}])=>{s.push({tokenSlug:(0,c.Vy)({standard:e,address:r,id:"0"}),from:g(a[0]),to:g(a[1]),amount:g(a[2])})})).with([i.Yn.ERC721,{name:"Transfer"}],(([e,{args:a}])=>{s.push({tokenSlug:(0,c.Vy)({standard:e,address:r,id:g(a[2])}),from:g(a[0]),to:g(a[1]),amount:"1"})})).with([i.Yn.ERC1155,{name:"TransferSingle"}],(([e,{args:a}])=>{s.push({tokenSlug:(0,c.Vy)({standard:e,address:r,id:g(a[3])}),from:g(a[1]),to:g(a[2]),amount:g(a[4])})})).with([i.Yn.ERC1155,{name:"TransferBatch"}],(([e,{args:a}])=>{const t=a[3].length;for(let n=0;n<t;n++)s.push({tokenSlug:(0,c.Vy)({standard:e,address:r,id:g(a[3][n])}),from:g(a[1]),to:g(a[2]),amount:g(a[4][n])})})).otherwise((()=>null))}))),s}const u=o.w6.createInterface(),x=o.aC.createInterface(),p=o.bP.createInterface();async function h(e,a,s){if(s.length>1){const t=await Promise.all(s.map((([s])=>(0,c.HK)(e,a,s))));for(let e=0;e<s.length;e++){if(t[e])return s[e]}}return s[0]}function g(e){return"string"===typeof e&&t.UJ(e)?r.K(e):e.toString()}function f(e){return!(e=e?.toHexString?.()??e?.toString?.())||"0x"===e||"0x00"===e||e===n.N}},72260:()=>{},72895:()=>{},13121:()=>{},31865:()=>{},88924:()=>{},55024:()=>{}},e=>{e.O(0,[435,710,134,751,333,565,659,191,704],(()=>{return a=1011,e(e.s=a);var a}));e.O()}]);