(()=>{var e={19394:(e,t,r)=>{"use strict";const s=r(17187);function i(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout((()=>{throw e}))}}class n extends s.EventEmitter{emit(e,...t){let r="error"===e;const s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}const n=s[e];if(void 0===n)return!1;if("function"===typeof n)i(n,this,t);else{const e=n.length,r=function(e){const t=e.length,r=new Array(t);for(let s=0;s<t;s+=1)r[s]=e[s];return r}(n);for(let s=0;s<e;s+=1)i(r[s],this,t)}return!0}}t.Z=n},12294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumProviderError=t.EthereumRpcError=void 0;const s=r(4445);class i extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!==typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return s.default(this.serialize(),n,2)}}t.EthereumRpcError=i;function n(e,t){if("[Circular]"!==t)return t}t.EthereumProviderError=class extends i{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}},92662:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorValues=t.errorCodes=void 0,t.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}},68797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ethErrors=void 0;const s=r(12294),i=r(68753),n=r(92662);function o(e,t){const[r,n]=c(t);return new s.EthereumRpcError(e,r||i.getMessageFromCode(e),n)}function a(e,t){const[r,n]=c(t);return new s.EthereumProviderError(e,r||i.getMessageFromCode(e),n)}function c(e){if(e){if("string"===typeof e)return[e];if("object"===typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!==typeof t)throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}t.ethErrors={rpc:{parse:e=>o(n.errorCodes.rpc.parse,e),invalidRequest:e=>o(n.errorCodes.rpc.invalidRequest,e),invalidParams:e=>o(n.errorCodes.rpc.invalidParams,e),methodNotFound:e=>o(n.errorCodes.rpc.methodNotFound,e),internal:e=>o(n.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!==typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return o(t,e)},invalidInput:e=>o(n.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>o(n.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>o(n.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>o(n.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>o(n.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>o(n.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>a(n.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>a(n.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>a(n.errorCodes.provider.unsupportedMethod,e),disconnected:e=>a(n.errorCodes.provider.disconnected,e),chainDisconnected:e=>a(n.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!==typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:i}=e;if(!r||"string"!==typeof r)throw new Error('"message" must be a nonempty string');return new s.EthereumProviderError(t,r,i)}}}},79826:(e,t,r)=>{"use strict";t.Sy=void 0;const s=r(12294);const i=r(68753);const n=r(68797);Object.defineProperty(t,"Sy",{enumerable:!0,get:function(){return n.ethErrors}});const o=r(92662)},68753:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const s=r(92662),i=r(12294),n=s.errorCodes.rpc.internal,o="Unspecified error message. This is a bug, please report it.",a={code:n,message:c(n)};function c(e,r=o){if(Number.isInteger(e)){const r=e.toString();if(l(s.errorValues,r))return s.errorValues[r].message;if(d(e))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function u(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!s.errorValues[t]||!!d(e)}function d(e){return e>=-32099&&e<=-32e3}function h(e){return e&&"object"===typeof e&&!Array.isArray(e)?Object.assign({},e):e}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=c,t.isValidCode=u,t.serializeError=function(e,{fallbackError:t=a,shouldIncludeStack:r=!1}={}){var s,n;if(!t||!Number.isInteger(t.code)||"string"!==typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof i.EthereumRpcError)return e.serialize();const o={};if(e&&"object"===typeof e&&!Array.isArray(e)&&l(e,"code")&&u(e.code)){const t=e;o.code=t.code,t.message&&"string"===typeof t.message?(o.message=t.message,l(t,"data")&&(o.data=t.data)):(o.message=c(o.code),o.data={originalError:h(e)})}else{o.code=t.code;const r=null===(s=e)||void 0===s?void 0:s.message;o.message=r&&"string"===typeof r?r:t.message,o.data={originalError:h(e)}}const d=null===(n=e)||void 0===n?void 0:n.stack;return r&&e&&d&&"string"===typeof d&&(o.stack=d),o}},17187:e=>{"use strict";var t,r="object"===typeof Reflect?Reflect:null,s=r&&"function"===typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!==e};function n(){n.init.call(this)}e.exports=n,e.exports.once=function(e,t){return new Promise((function(r,s){function i(r){e.removeListener(t,n),s(r)}function n(){"function"===typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}p(e,t,n,{once:!0}),"error"!==t&&function(e,t,r){"function"===typeof e.on&&p(e,"error",t,r)}(e,i,{once:!0})}))},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function u(e,t,r,s){var i,n,o;if(a(r),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),n=e._events),o=n[t]),void 0===o)o=n[t]=r,++e._eventsCount;else if("function"===typeof o?o=n[t]=s?[r,o]:[o,r]:s?o.unshift(r):o.push(r),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,console&&console.warn}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=d.bind(s);return i.listener=r,s.wrapFn=i,i}function l(e,t,r){var s=e._events;if(void 0===s)return[];var i=s[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):f(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),s=0;s<t;++s)r[s]=e[s];return r}function p(e,t,r,s){if("function"===typeof e.on)s.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(n){s.once&&e.removeEventListener(t,i),r(n)}))}}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),n.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return c(this)},n.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,n=this._events;if(void 0!==n)i=i&&void 0===n.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=n[e];if(void 0===c)return!1;if("function"===typeof c)s(c,this,t);else{var u=c.length,d=f(c,u);for(r=0;r<u;++r)s(d[r],this,t)}return!0},n.prototype.addListener=function(e,t){return u(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return u(this,e,t,!0)},n.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},n.prototype.removeListener=function(e,t){var r,s,i,n,o;if(a(t),void 0===(s=this._events))return this;if(void 0===(r=s[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,n=r.length-1;n>=0;n--)if(r[n]===t||r[n].listener===t){o=r[n].listener,i=n;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(s[e]=r[0]),void 0!==s.removeListener&&this.emit("removeListener",e,o||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,r,s;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,n=Object.keys(r);for(s=0;s<n.length;++s)"removeListener"!==(i=n[s])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this},n.prototype.listeners=function(e){return l(this,e,!0)},n.prototype.rawListeners=function(e){return l(this,e,!1)},n.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},n.prototype.listenerCount=g,n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},4445:e=>{e.exports=o,o.default=o,o.stable=d,o.stableStringify=d;var t="[...]",r="[Circular]",s=[],i=[];function n(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function o(e,t,r,o){var a;"undefined"===typeof o&&(o=n()),c(e,"",0,[],void 0,0,o);try{a=0===i.length?JSON.stringify(e,t,r):JSON.stringify(e,l(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==s.length;){var u=s.pop();4===u.length?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return a}function a(e,t,r,n){var o=Object.getOwnPropertyDescriptor(n,r);void 0!==o.get?o.configurable?(Object.defineProperty(n,r,{value:e}),s.push([n,r,t,o])):i.push([t,r,e]):(n[r]=e,s.push([n,r,t]))}function c(e,s,i,n,o,u,d){var h;if(u+=1,"object"===typeof e&&null!==e){for(h=0;h<n.length;h++)if(n[h]===e)return void a(r,e,s,o);if("undefined"!==typeof d.depthLimit&&u>d.depthLimit)return void a(t,e,s,o);if("undefined"!==typeof d.edgesLimit&&i+1>d.edgesLimit)return void a(t,e,s,o);if(n.push(e),Array.isArray(e))for(h=0;h<e.length;h++)c(e[h],h,h,n,e,u,d);else{var l=Object.keys(e);for(h=0;h<l.length;h++){var g=l[h];c(e[g],g,h,n,e,u,d)}}n.pop()}}function u(e,t){return e<t?-1:e>t?1:0}function d(e,t,r,o){"undefined"===typeof o&&(o=n());var a,c=h(e,"",0,[],void 0,0,o)||e;try{a=0===i.length?JSON.stringify(c,t,r):JSON.stringify(c,l(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==s.length;){var u=s.pop();4===u.length?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return a}function h(e,i,n,o,c,d,l){var g;if(d+=1,"object"===typeof e&&null!==e){for(g=0;g<o.length;g++)if(o[g]===e)return void a(r,e,i,c);try{if("function"===typeof e.toJSON)return}catch(e){return}if("undefined"!==typeof l.depthLimit&&d>l.depthLimit)return void a(t,e,i,c);if("undefined"!==typeof l.edgesLimit&&n+1>l.edgesLimit)return void a(t,e,i,c);if(o.push(e),Array.isArray(e))for(g=0;g<e.length;g++)h(e[g],g,g,o,e,d,l);else{var f={},p=Object.keys(e).sort(u);for(g=0;g<p.length;g++){var m=p[g];h(e[m],m,g,o,e,d,l),f[m]=e[m]}if("undefined"===typeof c)return f;s.push([c,i,e]),c[i]=f}o.pop()}}function l(e){return e="undefined"!==typeof e?e:function(e,t){return t},function(t,r){if(i.length>0)for(var s=0;s<i.length;s++){var n=i[s];if(n[1]===t&&n[0]===r){r=n[2],i.splice(s,1);break}}return e.call(this,t,r)}}}},t={};function r(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,r),n.exports}(()=>{"use strict";const e="gtPVdW1t1Tl5BaC5dOCNA";var t=r(79826);var s,i,n,o=r(19394);class a extends o.Z{constructor(){super(),this.setMaxListeners(150)}emit(e,...t){return super.emit(e,...t)}}!function(e){e.Wallet="WALLET",e.Page="PAGE"}(s||(s={})),function(e){e.Off="off",e.Hybrid="hybrid",e.Strict="strict"}(i||(i={})),function(e){e.eth_chainId="eth_chainId",e.net_version="net_version",e.eth_accounts="eth_accounts",e.eth_coinbase="eth_coinbase",e.eth_uninstallFilter="eth_uninstallFilter",e.eth_requestAccounts="eth_requestAccounts",e.eth_sign="eth_sign",e.eth_ecRecover="eth_ecRecover",e.personal_sign="personal_sign",e.personal_ecRecover="personal_ecRecover",e.eth_signTransaction="eth_signTransaction",e.eth_sendRawTransaction="eth_sendRawTransaction",e.eth_sendTransaction="eth_sendTransaction",e.eth_signTypedData="eth_signTypedData",e.eth_signTypedData_v1="eth_signTypedData_v1",e.eth_signTypedData_v2="eth_signTypedData_v2",e.eth_signTypedData_v3="eth_signTypedData_v3",e.eth_signTypedData_v4="eth_signTypedData_v4",e.eth_subscribe="eth_subscribe",e.eth_unsubscribe="eth_unsubscribe",e.eth_newFilter="eth_newFilter",e.eth_newBlockFilter="eth_newBlockFilter",e.eth_newPendingTransactionFilter="eth_newPendingTransactionFilter",e.eth_getFilterChanges="eth_getFilterChanges",e.eth_getFilterLogs="eth_getFilterLogs",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions",e.wallet_addEthereumChain="wallet_addEthereumChain",e.wallet_switchEthereumChain="wallet_switchEthereumChain",e.wallet_watchAsset="wallet_watchAsset",e.wallet_registerOnboarding="wallet_registerOnboarding",e.web3_clientVersion="web3_clientVersion",e.wallet_getSnaps="wallet_getSnaps",e.wallet_requestSnaps="wallet_requestSnaps"}(n||(n={}));const c="2.0",u="wigwam_state",d=new Set([n.eth_sendTransaction,n.eth_signTransaction,n.eth_sign,n.eth_ecRecover,n.personal_sign,n.personal_ecRecover,n.eth_signTypedData,n.eth_signTypedData_v1,n.eth_signTypedData_v2,n.eth_signTypedData_v3,n.eth_signTypedData_v4]),h=new Set([n.eth_requestAccounts,n.wallet_requestPermissions,n.wallet_switchEthereumChain,n.wallet_addEthereumChain]);class l{provider;logFilters;blockFilters;pendingTransactionFilters;cursors;timeouts;nextFilterId;constructor(e){this.provider=e,this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=1,this.provider.on("networkChanged",(()=>this.cleanupAll()))}async newFilter(e){const t=function(e){return{fromBlock:f(e.fromBlock),toBlock:f(e.toBlock),addresses:void 0===e.address?null:Array.isArray(e.address)?e.address:[e.address],topics:e.topics||[]}}(e),r=this.makeFilterId();return await this.setInitialCursorPosition(r,t.fromBlock),this.logFilters.set(r,t),this.setFilterTimeout(r),M(r)}async newBlockFilter(){const e=this.makeFilterId();return await this.setInitialCursorPosition(e,"latest"),this.blockFilters.add(e),this.setFilterTimeout(e),M(e)}async newPendingTransactionFilter(){const e=this.makeFilterId();return await this.setInitialCursorPosition(e,"latest"),this.pendingTransactionFilters.add(e),this.setFilterTimeout(e),M(e)}uninstallFilter(e){const t=w(e);return this.deleteFilter(t)}getFilterChanges(e,t=!1){const r=w(e);switch(this.timeouts.has(r)&&this.setFilterTimeout(r),!0){case this.logFilters.has(r):return this.getLogFilterChanges(r);case this.blockFilters.has(r):return this.getBlockFilterChanges(r,t);case this.pendingTransactionFilters.has(r):return this.getPendingTransactionFilterChanges();default:return Promise.reject(m())}}async getFilterLogs(e){const t=w(e),r=this.logFilters.get(t);if(!r)throw m();return this.requestProvider({method:"eth_getLogs",params:[g(r)]})}makeFilterId(){return this.nextFilterId++}async requestProvider(e){return await this.provider.request(e)}deleteFilter(e){return[this.logFilters.delete(e),this.blockFilters.delete(e),this.pendingTransactionFilters.delete(e),this.cursors.delete(e),this.timeouts.delete(e)].some(Boolean)}cleanupAll(){this.logFilters.clear(),this.blockFilters.clear(),this.pendingTransactionFilters.clear(),this.cursors.clear(),this.timeouts.clear()}async getLogFilterChanges(e){const t=this.logFilters.get(e),r=this.cursors.get(e);if(!r||!t)throw m();const s=await this.getCurrentBlockHeight(),i="latest"===t.toBlock?s:t.toBlock;if(r>s)return[];if(r>+t.toBlock)return[];const n=await this.requestProvider({method:"eth_getLogs",params:[g({...t,fromBlock:r,toBlock:i})]});if(Array.isArray(n)&&n.length>0){const t=n.map((e=>w(e.blockNumber||"0x0"))),s=Math.max(...t);if(s&&s>r){const t=s+1;this.cursors.set(e,t)}}return n}async getBlockFilterChanges(e,t=!1){const r=this.cursors.get(e);if(!r)throw m();const s=await this.getCurrentBlockHeight();if(r>s)return[];const i=(await Promise.all((n=r,o=s+1,Array.from({length:o-n},((e,t)=>n+t))).map((e=>this.getBlockByNumber(e))))).filter(Boolean);var n,o;const a=r+i.length;return this.cursors.set(e,a),t?i.map((e=>(delete(e={...e}).size,delete e.totalDifficulty,delete e.transactions,delete e.uncles,e))):i.map((({hash:e})=>y(e)))}async getPendingTransactionFilterChanges(){return Promise.resolve([])}async setInitialCursorPosition(e,t){const r=await this.getCurrentBlockHeight(),s="number"===typeof t&&t>r?t:r;return this.cursors.set(e,s),s}setFilterTimeout(e){const t=this.timeouts.get(e);t&&clearTimeout(t);const r=setTimeout((()=>this.deleteFilter(e)),3e5);this.timeouts.set(e,r)}async getCurrentBlockHeight(){return w(y(await this.requestProvider({method:"eth_blockNumber",params:[]})))}async getBlockByNumber(e){const t=await this.requestProvider({method:"eth_getBlockByNumber",params:[M(e),!1]});return"string"===typeof t?.hash?t:null}}function g(e){const t={fromBlock:p(e.fromBlock),toBlock:p(e.toBlock),topics:e.topics};return null!==e.addresses&&(t.address=e.addresses),t}function f(e){if(void 0===e||"latest"===e||"pending"===e)return"latest";if("earliest"===e)return 0;if(function(e){if("string"!==typeof e)return!1;const t=b(e).toLowerCase();return v.test(t)}(e))return w(e);throw new Error(`Invalid block option: ${String(e)}`)}function p(e){return"latest"===e?e:M(e)}function m(){const e=new Error("Filter not found");return Object.assign(e,{code:-32e3}),e}const v=/^[a-f0-9]*$/;function y(e,t=!1){if("string"===typeof e){const r=b(e).toLowerCase();if(v.test(r))return t?"0x"+r:r}throw new Error(`"${String(e)}" is not a hexadecimal string`)}function w(e){return Number.parseInt(y(e),16)}function M(e){return function(e){if(_(e))return"0x"+e.slice(2);return"0x"+e}(e.toString(16))}function b(e){return _(e)?e.slice(2):e}function _(e){return e.startsWith("0x")||e.startsWith("0X")}var N;!function(e){e.newHeads="newHeads",e.logs="logs"}(N||(N={}));class E extends a{provider;filter;subscriptions;constructor(e,t){super(),this.provider=e,this.filter=t,this.subscriptions=new Map,this.checkChangesAndDefer(),this.provider.on("networkChanged",(()=>this.subscriptions.clear()))}checkChangesAndDefer(){for(const[e,{type:t,filterId:r}]of this.subscriptions){const s=t=>{if(Array.isArray(t)&&t.length>0)for(const r of t)this.emit("message",{type:"eth_subscription",data:{subscription:e,result:r}})};switch(t){case"newHeads":this.filter.getFilterChanges(r,!0).then(s).catch(console.error);break;case"logs":this.filter.getFilterChanges(r).then(s).catch(console.error)}}setTimeout((()=>this.checkChangesAndDefer()),5e3)}async subscribe(e){const t=e[0],r=function(e){let t="0x";for(let r=0;r<e;r++)t+=A(),t+=A();return t}(16);switch(t){case"newHeads":{const e=await this.filter.newBlockFilter();return this.subscriptions.set(r,{type:"newHeads",filterId:e}),r}case"logs":{const{address:t,topics:s}=e[1],i=await this.filter.newFilter({address:t,topics:s});return this.subscriptions.set(r,{type:"logs",filterId:i}),r}default:throw new Error(`SubscriptionManager - unsupported subscription type "${t}"`)}}unsubscribe(e){const t=e[0],r=this.subscriptions.get(t);return!!r&&(this.subscriptions.delete(t),this.filter.uninstallFilter(r.filterId))}}function A(){return Math.floor(16*Math.random()).toString(16)}const I=Symbol(),j=Symbol();function C(e,t){return{id:t?.id??null,jsonrpc:t?.jsonrpc??c,...e}}const D={invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",unsupportedSync:e=>`The provider does not support synchronous methods like ${e} without a callback parameter.`};class P extends a{propIsMetaMaskPreferred;allProviders;currentProvider;#e;get#t(){if(!this.#e)return this.allProviders;const e=this.allProviders.filter((e=>e.isWigwam&&e.mmCompatible===i.Strict));return e.length>0?e:this.allProviders.filter((e=>!e.isWigwam||e.mmCompatible===i.Hybrid))}get info(){return this.currentProvider.info}get isMetaMask(){return this.propIsMetaMaskPreferred&&(this.selectedAddress?this.currentProvider.isMetaMask:this.allProviders.some((e=>e.isMetaMask)))}get _metamask(){return this.currentProvider._metamask??{}}get isWigwam(){return this.selectedAddress?this.currentProvider.isWigwam:this.allProviders.some((e=>e.isWigwam))}get chainId(){return this.currentProvider.chainId}get networkVersion(){return this.currentProvider.networkVersion}get selectedAddress(){return k(this.currentProvider)}constructor(e,t=!1,r=!1){if(super(),this.propIsMetaMaskPreferred=r,this.allProviders=[],0===e.length)throw new Error("Must have at least one provider");this.#e=t,this.currentProvider=e[0],this.#r(),this.addProviders(...e),this.addProviders=this.addProviders.bind(this),this.request=this.request.bind(this),this.isConnected=this.isConnected.bind(this),this.sendAsync=this.sendAsync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendSync=this.sendSync.bind(this)}addProviders(...e){for(const t of e)this===t||this.allProviders.includes(t)||(this.allProviders.push(t),t.on("connect",(()=>setTimeout((()=>this.#s())))),t.on("accountsChanged",(()=>this.#s())));this.#s()}#s(){const e=e=>{if(e===this.currentProvider)return;const t=this.currentProvider;this.currentProvider=e,this.#r(),this.emit("accountsChanged",[k(e)]),t.chainId!==e.chainId&&this.emit("chainChanged",e.chainId),t.networkVersion!==e.networkVersion&&this.emit("networkChanged",e.networkVersion)};if(this.#e){const t=this.#t;if(t.length>0)return void e(t.find(k)??t[0])}if(!this.selectedAddress)for(const t of this.allProviders)if(t!==this.currentProvider&&k(t)){e(t);break}}#i;#r(){this.#i&&this.#i?.();const e=this.currentProvider,t=[];if(e!==this){for(const r of O){const s=e=>this.emit(r,e);e.on(r,s),t.push((()=>e.removeListener(r,s)))}this.#i=()=>{for(const e of t)e()}}}#n(e){return new Promise(((t,r)=>{const s=this.#t;let i=!1,n=0;for(const o of s)e(o).then((e=>{i||(i=!0,this.allProviders=[o,...this.allProviders.filter((e=>e!==o))],t(e))})).catch((e=>{i||++n===s.length&&r(e)}))}))}request(e){return T(e.method,this.currentProvider)?this.#n((t=>t.request(e))):this.currentProvider.request(e)}isConnected(){return this.allProviders.some((e=>e.isConnected?.()))}sendAsync(e,t){this.send(e,t)}enable(){return this.request({method:n.eth_requestAccounts})}send(e,t){return T("string"===typeof e?e:e.method,this.currentProvider)?"function"!==typeof t?this.#n((r=>r.send(e,t))):void this.#n((t=>new Promise(((r,s)=>{t.send(e,((e,t)=>{if(e)return s(e);r(t)}))})))).then((e=>t(null,e))).catch((e=>t(e))):this.currentProvider.send(e,t)}sendSync(e){return this.currentProvider.sendSync(e)}}function T(e,t){return e===n.wallet_requestPermissions||e===n.eth_requestAccounts&&!k(t)}const O=["connect","chainChanged","networkChanged","accountsChanged","message"];function k(e){try{if("accounts"in e._state)return e._state.accounts?.[0]??null}catch{}return e.selectedAddress}const L=new class{self;recipient;constructor(e,t){this.self=e,this.recipient=t}send(t){const r={bid:e,target:this.recipient,data:t};window.postMessage(r,location.origin)}subscribe(t){const r=r=>{r.source===window&&r.origin===location.origin&&r.data?.bid===e&&r.data.target===this.self&&t(r.data.data,r)};return window.addEventListener("message",r,!1),()=>window.removeEventListener("message",r,!1)}}("injected","content"),S=new class extends a{isWigwam=!0;isMetaMask=!0;autoRefreshOnNetworkChange=!1;mmCompatible=i.Strict;chainId=null;networkVersion=null;selectedAddress=null;info=Object.freeze({name:"Wigwam",uuid:"wigwam-gtPVdW1t1Tl5BaC5dOCNA",rdns:"com.wigwam.wallet",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGgKICAgIGQ9Ik0wLjAwMDEyMjA3IDQ3Ljc4NjVDMC4wMDAxMjIwNyAzMS4wNTk3IDAuMDAwMTIyMDcgMjIuNjk2MiAzLjI1NTM4IDE2LjMwNzRDNi4xMTg3OSAxMC42ODc3IDEwLjY4NzggNi4xMTg2NyAxNi4zMDc1IDMuMjU1MjZDMjIuNjk2MyAwIDMxLjA1OTggMCA0Ny43ODY2IDBIODAuMjEzNUM5Ni45NDAzIDAgMTA1LjMwNCAwIDExMS42OTMgMy4yNTUyNkMxMTcuMzEyIDYuMTE4NjcgMTIxLjg4MSAxMC42ODc3IDEyNC43NDUgMTYuMzA3NEMxMjggMjIuNjk2MiAxMjggMzEuMDU5NiAxMjggNDcuNzg2NVY4MC4yMTMzQzEyOCA5Ni45NDAyIDEyOCAxMDUuMzA0IDEyNC43NDUgMTExLjY5MkMxMjEuODgxIDExNy4zMTIgMTE3LjMxMiAxMjEuODgxIDExMS42OTMgMTI0Ljc0NUMxMDUuMzA0IDEyOCA5Ni45NDA0IDEyOCA4MC4yMTM1IDEyOEg0Ny43ODY3QzMxLjA1OTggMTI4IDIyLjY5NjMgMTI4IDE2LjMwNzUgMTI0Ljc0NUMxMC42ODc4IDEyMS44ODEgNi4xMTg3OSAxMTcuMzEyIDMuMjU1MzggMTExLjY5MkMwLjAwMDEyMjA3IDEwNS4zMDQgMC4wMDAxMjIwNyA5Ni45NDAyIDAuMDAwMTIyMDcgODAuMjEzNFY0Ny43ODY1WiIKICAgIGZpbGw9IiM4MEVGNkUiIC8+CiAgPHBhdGgKICAgIGQ9Ik05Mi40NDM4IDQwLjUxNjhDOTIuNTcwOCAzOS45Mjc1IDkzLjA5MTkgMzkuNTA2OCA5My42OTQ4IDM5LjUwNjhIMTExLjA0OEMxMTEuODk1IDM5LjUwNjggMTEyLjUwOSA0MC4zMTU3IDExMi4yOCA0MS4xMzE4TDk2LjUzNDIgOTcuMzM3M0M5Ni4zNzk0IDk3Ljg4OTkgOTUuODc1NyA5OC4yNzE4IDk1LjMwMTkgOTguMjcxOEg3OC44ODE2Qzc4LjMxNDEgOTguMjcxOCA3Ny44MTQzIDk3Ljg5OCA3Ny42NTQgOTcuMzUzNUw2NC43MTExIDUzLjM5MTRDNjQuNDQwMiA1Mi40NzE0IDYzLjEzNjIgNTIuNDczNyA2Mi44Njg3IDUzLjM5NDdMNTAuMTAwNiA5Ny4zNDkxQzQ5Ljk0MTggOTcuODk1OCA0OS40NDEgOTguMjcxOCA0OC44NzE3IDk4LjI3MThIMzIuNzExNEMzMi4xMzc3IDk4LjI3MTggMzEuNjM0MSA5Ny44OSAzMS40NzkyIDk3LjMzNzZMMTUuNzIwMyA0MS4xMzJDMTUuNDkxNCA0MC4zMTU5IDE2LjEwNDkgMzkuNTA2OCAxNi45NTI1IDM5LjUwNjhIMzQuMjg0MkMzNC44OTAzIDM5LjUwNjggMzUuNDEzMyAzOS45MzIgMzUuNTM3IDQwLjUyNTNMNDEuMzYzMSA2OC40NjMyQzQxLjU2NDEgNjkuNDI3MyA0Mi45MTM0IDY5LjQ5OTQgNDMuMjE2IDY4LjU2MjJMNTUuNDY5NiAzMC42MTQ3QzU1LjY0MDIgMzAuMDg2MyA1Ni4xMzIyIDI5LjcyODIgNTYuNjg3NCAyOS43MjgySDcxLjI3NzNDNzEuODM0NyAyOS43MjgyIDcyLjMyOCAzMC4wODkgNzIuNDk2OSAzMC42MjAzTDg0LjU2MTUgNjguNTcyNEM4NC44NTk2IDY5LjUwOTkgODYuMjA3MSA2OS40NDU2IDg2LjQxNDUgNjguNDgzOUw5Mi40NDM4IDQwLjUxNjhaIgogICAgZmlsbD0iIzBEMTMxMSIgLz4KPC9zdmc+Cg==",description:"Wigwam \u2014 Web 3.0 Wallet"});#o=!1;#a=((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""))();#c=0;#u;#d=new l(this);#h=new E(this,this.#d);constructor(e){super(),this.#u=e,this.#l(),this.#g()}#f(){return`${this.#a}_${this.#c++}`}#l(){this.#u.subscribe((e=>{e?.jsonrpc===c&&this.emit(I,e)}))}#g(){this.on(I,(e=>{if(e?.method===u){const{chainId:t,accountAddress:r,mmCompatible:s}=e.params;this.mmCompatible=s,this.#p(t,r||null),this.emit(j,void 0)}})),this.#h.on("message",(e=>{this.emit("message",e)}))}#p(e,t){const r=`0x${e.toString(16)}`;let s=!1;if(this.chainId!==r){null===this.chainId&&(this.#o=!0,this.emit("connect",{chainId:r}),s=!0),this.chainId=r,this.emit("chainChanged",r);const t=e.toString();this.networkVersion=t,this.emit("networkChanged",t)}this.selectedAddress!==t&&(!s&&!this.selectedAddress&&t&&this.chainId&&this.emit("connect",{chainId:this.chainId}),this.selectedAddress=t,this.emit("accountsChanged",t?[t]:[]))}async#m(e){const r=[()=>this.#v(e),()=>this.#y(e),()=>this.#w(e),()=>this.#M(e),()=>this.#b(e)];for(const e of r){const t=await e();if(void 0!==t)return t}throw t.Sy.provider.unsupportedMethod()}async#v({method:e,params:t=[]}){switch(e){case n.web3_clientVersion:return"Wigwam/v2.2.3";case n.eth_chainId:return this.chainId;case n.net_version:return this.networkVersion;case n.eth_coinbase:return this.selectedAddress;case n.eth_accounts:return this.selectedAddress?[this.selectedAddress]:[];case n.eth_uninstallFilter:const e=t[0];return this.#d.uninstallFilter(e);case n.eth_requestAccounts:return this.selectedAddress?[this.selectedAddress]:void 0;case n.wallet_getPermissions:return this.selectedAddress?void 0:[];default:return}}async#y({method:e,params:t}){if(Array.isArray(t))switch(e){case n.eth_subscribe:return this.#h.subscribe(t);case n.eth_unsubscribe:return this.#h.unsubscribe(t);default:return}}async#w({method:e,params:t=[]}){const r=t[0];switch(e){case n.eth_newFilter:return this.#d.newFilter(r);case n.eth_newBlockFilter:return this.#d.newBlockFilter();case n.eth_newPendingTransactionFilter:return this.#d.newPendingTransactionFilter();case n.eth_getFilterChanges:return this.#d.getFilterChanges(r);case n.eth_getFilterLogs:return this.#d.getFilterLogs(r);default:return}}async#M({method:e}){if(!this.selectedAddress&&d.has(e))throw t.Sy.provider.unauthorized()}#b({method:e,params:t}){return new Promise(((r,s)=>{const i=this.#f(),n=async t=>{t&&"id"in t&&t.id===i&&(this.removeListener(I,n),"result"in t?(h.has(e)&&await new Promise((e=>{const t=()=>{e(),this.removeListener(j,t),clearTimeout(r)};this.on(j,t);const r=setTimeout(t,150)})),r(t.result)):s(t.error))};this.on(I,n),this.#u.send({jsonrpc:c,id:i,method:e,params:t})}))}isConnected(){return this.#o}_metamask={isUnlocked:async()=>!0};async request(e){if(!this.#o)throw t.Sy.provider.disconnected();if(!e||"object"!==typeof e||Array.isArray(e))throw t.Sy.rpc.invalidRequest({message:D.invalidRequestArgs(),data:e});const{method:r,params:s}=e;if("string"!==typeof r||0===r.length)throw t.Sy.rpc.invalidRequest({message:D.invalidRequestMethod(),data:e});if(void 0!==s&&!Array.isArray(s)&&("object"!==typeof s||null===s))throw t.Sy.rpc.invalidRequest({message:D.invalidRequestParams(),data:e});s||(e={method:r,params:[]});try{return await this.#m(e)}catch(e){const{message:t="Unknown error occurred",code:r=-32603,data:s}="object"===typeof e&&null!==e?e:{};throw{message:t,code:r,data:s,stack:new Error(t).stack}}}sendAsync(e,t){this.send(e,t)}enable(){return this.request({method:n.eth_requestAccounts})}send(e,t){if("string"===typeof e&&(!t||Array.isArray(t)))return this.request({method:e,params:t}).then((e=>C({result:e})));if(!e||"object"!==typeof e||"function"!==typeof t)return this.sendSync(e);{if(Array.isArray(e))return void Promise.all(e.map((e=>this.request(e).then((t=>C({result:t},e))).catch((t=>C({error:t},e)))))).then((e=>t(null,e)));const r=e;this.request(r).then((e=>t(null,C({result:e},r)))).catch((e=>t(e,C({error:e},r))))}}sendSync(e){let t;switch(e.method){case n.net_version:t=this.networkVersion||null;break;case n.eth_accounts:t=this.selectedAddress?[this.selectedAddress]:[];break;case n.eth_coinbase:t=this.selectedAddress||null;break;case n.eth_uninstallFilter:this.request(e).catch(console.error),t=!0;break;default:throw new Error(D.unsupportedSync(e.method))}return C({result:t},e)}}(L),x=new Promise((e=>{const t=L.subscribe((r=>{if(r?.jsonrpc===c&&r?.method===u){const s=r.params.mmCompatible!==i.Off;e(s),t()}}));setTimeout((()=>{e(!1),t()}),3e3)}));var z;function F(e,t=!1){const r=window[e];if(r?.isWigwam&&"addProviders"in r)return void r.addProviders(S);const s=Object.getOwnPropertyDescriptor(window,e),i=!s||s.configurable,n=t&&i,o=new P(r&&i?[S,...R(r)]:[S],t,n),a=()=>Object.defineProperty(window,e,{configurable:!1,get:()=>o,set(e){e&&o.addProviders(e)}});if(i)r&&t?x.then((e=>{e&&a()})):a();else try{window[e]=o}catch(e){}r||window.dispatchEvent(new Event(`${e}#initialized`))}function R(e){try{if(Array.isArray(e.providers))return new Set([e,...e.providers])}catch(e){}return[e]}F("ethereum",!0),F("wigwamEthereum"),z="evmproviders",(window[z]||(window[z]={}))[S.info.uuid]=S,function(){const e=()=>{window.dispatchEvent(new CustomEvent("eip6963:announceProvider",{detail:Object.freeze({info:S.info,provider:S})}))};window.addEventListener("eip6963:requestProvider",e),e()}(),function(){const e=L.subscribe((t=>{t?.jsonrpc===c&&"wigwam_phishing_warning"===t?.method&&(e(),setTimeout((()=>{location.replace(`https://metamask.github.io/phishing-warning/v2.1.0/#hostname=${location.hostname}&href=${location.href}`)}),50))}))}()})()})();