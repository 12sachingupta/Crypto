"use strict";(globalThis.webpackChunk_wigwam_app=globalThis.webpackChunk_wigwam_app||[]).push([[727],{7727:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var n=a(85893),s=a(67294),r=a(19394);class c extends r.Z{constructor(){super(),this.setMaxListeners(150)}emit(e,...t){return super.emit(e,...t)}}var o=a(48583),i=a(85182),E=a(27885);const d={[i.C.STAGING]:"https://global-stg.transak.com",[i.C.PRODUCTION]:"https://global.transak.com"};function l(e,t){return function(a){if(a?.data?.event_id)switch(a.data.event_id){case i.E.TRANSAK_WIDGET_INITIALISED:e.emit(i.E.TRANSAK_WIDGET_INITIALISED,{eventName:i.E.TRANSAK_WIDGET_INITIALISED,status:!0});break;case i.E.TRANSAK_ORDER_CREATED:e.emit(i.E.TRANSAK_ORDER_CREATED,{eventName:i.E.TRANSAK_ORDER_CREATED,status:a.data.data});break;case i.E.TRANSAK_ORDER_SUCCESSFUL:e.emit(i.E.TRANSAK_ORDER_SUCCESSFUL,{eventName:i.E.TRANSAK_ORDER_SUCCESSFUL,status:a.data.data});break;case i.E.TRANSAK_ORDER_CANCELLED:e.emit(i.E.TRANSAK_ORDER_CANCELLED,{eventName:i.E.TRANSAK_ORDER_CANCELLED,status:a.data.data});break;case i.E.TRANSAK_ORDER_FAILED:e.emit(i.E.TRANSAK_ORDER_FAILED,{eventName:i.E.TRANSAK_ORDER_FAILED,status:a.data.data});break;case i.E.TRANSAK_WALLET_REDIRECTION:e.emit(i.E.TRANSAK_WALLET_REDIRECTION,{eventName:i.E.TRANSAK_WALLET_REDIRECTION,status:a.data.data});break;case i.E.TRANSAK_WIDGET_CLOSE:e.emit(i.E.TRANSAK_WIDGET_CLOSE,{eventName:i.E.TRANSAK_WIDGET_CLOSE,status:!0}),t()}}}var u=a(5042),A=a(69165),R=a(74277),m=a(53416),S=a(85350),T=a(90406),_=a(52889);const C="cb187101-498c-4b02-b0e6-ba37f021e191",N=!1,D=()=>{const e=(0,_.xx)(),{alert:t}=(0,A.Rh)(),{onRampCurrency:a}=(0,_.x9)(),r=(0,s.useMemo)((()=>new c),[]),[D]=(0,o.KO)(u.WY),I=(0,o.b9)(u.H),p=(0,o.Dv)(u.KX),{currentAccount:{address:f}}=(0,_.xe)(),y=(0,s.useMemo)((()=>["BTC","USD"].includes(D)),[D]);(0,s.useEffect)((()=>{N}),[t,I]);const w=(0,s.useMemo)((()=>C?{apiKey:C,environment:i.C.PRODUCTION,defaultFiatCurrency:y?"USD":D,network:a?.network,productsAvailed:"BUY",cryptoCurrencyCode:a?.symbol,walletAddress:f,disableWalletAddressForm:!0,themeColor:"#0D1311",exchangeScreenTitle:`Securely buy ${a?.symbol} with Web3.0`}:null),[f,y,a?.network,a?.symbol,D]),h=(0,s.useMemo)((()=>w&&function(e){const{environment:t=i.C.STAGING}=e,a={};let n="";return Object.keys(e).forEach((t=>{if(!["environment","widgetWidth","widgetHeight"].includes(t))if(["walletAddressesData","userData"].includes(t))try{a[t]=JSON.stringify(e[t])}catch(e){}else if(["nftData","sourceTokenData","cryptoCurrencyData"].includes(t))try{a[t]=btoa(JSON.stringify(e[t]))}catch(e){}else if(["calldata"].includes(t))try{a[t]=btoa(String.fromCharCode.apply(null,E.ZP.deflate(e[t])))}catch(e){}else a[t]=e[t]})),n=new URLSearchParams(a).toString(),`${d[t]}?${n}`}(w)),[w]),k=(0,s.useCallback)((a=>{(e=>{const t={id:(0,m.x0)(),type:S.T8.Ramp,partnerOrderId:e.id,timeAt:new Date(e.createdAt).getTime(),totalFee:e.totalFeeInFiat,amountInCrypto:e.cryptoAmount,amountInFiat:e.fiatAmount,amountInFiatUSD:e.fiatAmountInUsd,tokenSlug:e.tokenSlug,chainId:e.chainId,accountAddress:e.walletAddress,cryptoCurrency:e.cryptoCurrency,fiatCurrency:e.fiatCurrency,network:e.network,paymentType:e.paymentOptionId,status:e.status,statusReason:e.statusReason,partnerOrder:e,pending:1,partner:"transak",kind:"onramp",withError:!1,source:{type:"self",kind:S._g.Transfer}};T.tS.put(t)})({...a.status,tokenSlug:p,chainId:e}),I([!1]),t({title:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(R.r,{className:"w-8"})," Transaction Processing"]}),content:(0,n.jsx)("p",{children:"Great news! We're processing your credit card transaction for cryptocurrency. It won't be long now."})})}),[e,p,I,t]),L=(0,s.useCallback)((()=>{r.removeAllListeners(),window.removeEventListener("message",l(r,L)),r.off(i.E.TRANSAK_ORDER_SUCCESSFUL,k)}),[r,k]),O=(0,s.useCallback)((()=>{window.addEventListener("message",l(r,L)),r.on(i.E.TRANSAK_ORDER_SUCCESSFUL,k)}),[r,L,k]);return(0,s.useEffect)((()=>(O(),()=>L())),[L,O,h]),(0,n.jsx)("div",{className:"-ml-12 mr-12 h-full flex justify-center rounded-md",id:"transakPanel",children:h&&(0,n.jsx)("iframe",{id:"transakIframe",title:"transak",src:h,allow:"camera;microphone;payment",className:"h-full w-[420px] border-none rounded-md"})})}}}]);